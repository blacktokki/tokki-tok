{"version":3,"file":"static/js/787.3d4c628c.chunk.js","mappings":"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","sources":["src/hooks/useResizeContext.tsx","src/hooks/useWebsocketContext.tsx","src/hooks/lists/useMessengerChannelList.ts","src/hooks/lists/useMessengerMemberList.ts","src/hooks/useInvitee.ts","src/constants/Colors.ts","src/components/ContractFooter.tsx","src/screens/main/LoginScreen.tsx","src/components/Themed.tsx","src/components/CommonSection.tsx","src/components/CommonButton.tsx","src/hooks/useUploadContext.tsx","src/hooks/lists/useMessengerContentList.ts","src/components/TextButton.tsx","src/hooks/useModalsContext.tsx","src/components/ModalSection.tsx","src/hooks/useModalEffect.ts","src/modals/AlertModal.tsx","src/components/HeaderRight.tsx","src/components/LinkPreview.tsx","src/lib/react-native-paper/Avatar.tsx","src/components/Avatar.tsx","src/lib/react-native-webrtc/useWebsocketContext.tsx","src/lib/react-native-webrtc/webrtc/p2p.tsx","src/lib/react-native-webrtc/webrtc/index.ts","src/lib/react-native-webrtc/LocalCam.tsx","src/lib/react-native-webrtc/RemoteCam.tsx","src/screens/main/ChatScreen/VideoCallSection.tsx","src/components/FilePreview.tsx","src/hooks/lists/useUserMembershipList.ts","src/components/CommonTextInput.tsx","src/components/RowField.tsx","src/components/TextField.tsx","src/hooks/useLocalSearch.ts","src/components/TabView.tsx","src/components/CommonItem.tsx","src/components/MemberItem.tsx","src/components/CopyField.tsx","src/modals/InviteModal.tsx","src/hooks/lists/useExternalMembershipList.ts","src/modals/DateTimePickerModal.tsx","src/screens/main/ChatScreen/TimerTags.tsx","src/hooks/lists/useTimerMessageContent.ts","src/modals/MessageModal.tsx","src/modals/ChannelEditModal.tsx","src/screens/main/ChatScreen/UploadTags.tsx","src/screens/main/ChatScreen/index.tsx","src/components/Profile.tsx","src/modals/ProfileModal.tsx","src/hooks/useFirebaseContext.tsx","src/modals/RegistrationModal.tsx","src/screens/main/HomeScreen/ConfigSections.tsx","src/screens/main/HomeScreen/index.tsx","src/screens/index.ts","src/screens/main/DemoScreen.tsx","src/navigation/LinkingConfiguration.ts","src/screens/NotFoundScreen.tsx","src/navigation/Drawer.tsx","src/modals/index.ts","src/navigation/MainNavigator.tsx","src/navigation/index.tsx","web/firebase-config.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext, useMemo } from 'react';\r\nimport { Dimensions, ScaledSize, useWindowDimensions } from 'react-native';\r\n//@ts-ignore\r\nimport useMobileDetect from 'use-mobile-detect-hook';\r\n\r\ntype WindowType = 'portrait' | 'landscape'\r\n\r\nconst getWindowType = (window:{width:number, height:number})=> window.height >= window.width?'portrait':'landscape' as WindowType;\r\n\r\nconst ResizeContextContext = createContext<WindowType>(getWindowType(Dimensions.get('window')));\r\n\r\nexport const ResizeContextProvider = ({children}:{children:React.ReactNode})=>{\r\n  const detectMobile = useMobileDetect();\r\n  const {width, height} = useWindowDimensions()\r\n  const [windowType, setWindowType] = useState(getWindowType({width, height}))\r\n  useEffect(()=>{\r\n    setWindowType(getWindowType({width, height}))\r\n  }, [width, height])\r\n  return <ResizeContextContext.Provider value={detectMobile.isMobile()?'portrait':windowType}>\r\n    {children}\r\n  </ResizeContextContext.Provider>\r\n}\r\n\r\nexport default function useResizeContext() {\r\n  const windowType = useContext(ResizeContextContext)\r\n  return windowType\r\n}","import React, { Context, createContext,  useContext, useEffect, useState } from \"react\"\r\nimport useWebSocket from \"react-use-websocket\"\r\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\"\r\nimport {websockerURL } from \"../constants/Envs\"\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { AppState, AppStateStatus } from \"react-native\";\r\n\r\ntype WebsocketContextType = {lastJsonMessage:any, sendJsonMessage:SendJsonMessage }\r\nconst defaultContext = {lastJsonMessage:undefined, sendJsonMessage:()=>{}}\r\nconst WebSocketContext = createContext<WebsocketContextType>(defaultContext);\r\n\r\nexport const WebSocketInternalProvider = ({children, path, Context, useBackground}:{children:React.ReactNode, path:string, Context:Context<WebsocketContextType>, useBackground?:boolean})=>{\r\n  const [token, setToken] = useState<string|null>(null)\r\n  const [isActive, setIsActive] = useState<boolean>(useBackground || AppState.currentState == 'active')\r\n  const { lastJsonMessage, sendJsonMessage } = useWebSocket(`${websockerURL}/${path}`,{\r\n    shouldReconnect: (closeEvent) => true,\r\n    protocols: token?['Authorization',  token]:undefined,\r\n    onOpen: (e)=>{console.log(`success websocket connection(${path})`)},\r\n    onClose: (e)=> {console.log(`closed websocket connection(${path})`)},\r\n  }, isActive && token!=null)\r\n  useEffect(()=>{\r\n    AsyncStorage.getItem('Authorization').then(setToken)\r\n    const onChange = (nextState:AppStateStatus)=>setIsActive(useBackground || nextState == 'active')\r\n    const listener = AppState.addEventListener(\"change\", onChange)\r\n    return ()=> listener.remove()\r\n  }, [])\r\n  return <Context.Provider value={token!=null?{lastJsonMessage, sendJsonMessage}:defaultContext}>\r\n      {children}\r\n    </Context.Provider>\r\n}\r\n\r\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\r\n  return disable?<>{children}</>:<WebSocketInternalProvider path={'messenger/ws/'} Context={WebSocketContext}>\r\n    {children}\r\n  </WebSocketInternalProvider>\r\n}\r\n\r\nexport default ()=>{\r\n  const webSocketContext = useContext(WebSocketContext)\r\n  return webSocketContext\r\n}\r\n\r\n","import { useEffect } from \"react\";\r\nimport { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { getMessengerChannelList, postChannel, postDirectChannel, putChannel } from \"../../services\";\r\nimport { MessengerChannel, MessengerContent } from \"../../types\";\r\nimport { Auth } from \"../useAuthContext\";\r\nimport useWebsocketContext from \"../useWebsocketContext\";\r\n\r\nexport default function useMessengerChannelList(auth?:Auth){\r\n  const queryClient = useQueryClient()\r\n  const {lastJsonMessage} = useWebsocketContext()\r\n  const { data } = useQuery(\"MessengerChannelList\" , async()=>await getMessengerChannelList(auth?.user?.id))\r\n\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null){\r\n      if(lastJsonMessage['type']=='enter'){\r\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>{\r\n          return (_data?.find(v=>v.id==lastJsonMessage['data']['id'])?_data:[lastJsonMessage['data'] , ...(_data|| [])]).sort((a, b)=>a.id - b.id)\r\n        })\r\n      }\r\n      if (lastJsonMessage['type']=='next_message'){\r\n        const data:MessengerContent = lastJsonMessage['data']\r\n        queryClient.setQueryData<MessengerChannel[]>(\"MessengerChannelList\", (_data)=>(_data || []).map(v=>{\r\n          if (v.id == data.channel){\r\n            return {...v, last_message:{content:data.message_set[0]?.content, created:data.created}}\r\n          }\r\n          return v\r\n        }))\r\n      }\r\n      // if(lastJsonMessage['type']=='leave'){\r\n      //   queryClient.setQueryData<Channel[]>(\"MessengerChannelList\", (_data)=>_data?.filter(v=>v.id!=lastJsonMessage['data']['channel_id']) || [])\r\n      // }\r\n    }\r\n  }, [lastJsonMessage])\r\n  return data\r\n}\r\n\r\nexport function useMessengerChannelSorted(auth?:Auth){\r\n  const channelList = useMessengerChannelList(auth);\r\n  return channelList?.sort((a, b)=>(a.last_message?.created || '') < (b.last_message?.created || '')?1:-1)\r\n}\r\nexport function useMessengerChannelMutation(){\r\n  const queryClient = useQueryClient()\r\n\r\n  const create = useMutation(postChannel, {\r\n    onSuccess: ()=>queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  });\r\n\r\n  const update = useMutation(putChannel, {\r\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  })\r\n\r\n  const direct = useMutation(postDirectChannel, {\r\n    onSuccess: () => queryClient.invalidateQueries(\"MessengerChannelList\")\r\n  })\r\n\r\n  return { create:create.mutateAsync, update:update.mutateAsync, direct:direct.mutateAsync}\r\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { postBulkMessengerMember, deleteMessengerMember, getMessengerMemberList } from \"../../services\";\r\n\r\nexport default function useMessengerMemberList(channel_id:number){\r\n  const { data } = useQuery([\"MessengerMemberList\", channel_id] , async()=>await getMessengerMemberList(channel_id))\r\n  return data\r\n}\r\n\r\n\r\nexport function useMessengerMemberMutation(){\r\n  const queryClient = useQueryClient()\r\n  const invite = useMutation(postBulkMessengerMember, {\r\n    onSuccess: ()=>{\r\n      queryClient.invalidateQueries(\"MessengerMemberList\")\r\n    }\r\n  })\r\n\r\n  const leave = useMutation(deleteMessengerMember, {\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries(\"MessengerChannelList\")\r\n      queryClient.invalidateQueries(\"MessengerMemberList\")\r\n    }\r\n  })\r\n  return {invite:invite.mutateAsync, leave:leave.mutateAsync}\r\n}","import { useEffect } from \"react\"\r\nimport { navigate } from \"../navigation\"\r\nimport useMessengerChannelList from \"./lists/useMessengerChannelList\"\r\nimport { useMessengerMemberMutation } from \"./lists/useMessengerMemberList\"\r\nimport useAuthContext from \"./useAuthContext\"\r\n\r\nlet invitee_id:number|undefined\r\nlet invitee_state:0|1|2=0\r\n\r\nexport const replaceInviteeState = (l:Location)=>{\r\n    if(l !==undefined && l.pathname.endsWith('/invitee')){\r\n        var params = l.search.slice(1).split('&').filter(v=>v.startsWith('id='))\r\n        if (params.length>0)\r\n            invitee_id = parseInt(params[0].split('=')[1])\r\n        window.history.replaceState(null, '', l.href.split('invitee')[0]\r\n        );\r\n    }\r\n}\r\n\r\nexport default ()=>{\r\n    const {auth} = useAuthContext()\r\n    const channelList = useMessengerChannelList(auth)\r\n    const messengerMemberMutation = useMessengerMemberMutation()\r\n    useEffect(()=>{\r\n        if (auth.user){\r\n            if (invitee_id && channelList){\r\n                var id = invitee_id;\r\n                var redirect = ()=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id}})\r\n                invitee_id = undefined;\r\n                invitee_state = 1;\r\n                if(channelList.find(v=>v.id==id) === undefined){\r\n                    console.log(`invite processing (channel:${id})`)\r\n                    messengerMemberMutation.invite({\r\n                        channel_id:id,\r\n                        user_ids:[auth.user.id]\r\n                    }).then(redirect)\r\n                }\r\n                else{\r\n                    console.log('already invite')\r\n                    redirect()\r\n                }\r\n            }\r\n        }\r\n        else{\r\n            if (invitee_state == 1){\r\n                invitee_state=2\r\n            }\r\n        }\r\n    }, [auth, channelList])\r\n    useEffect(()=>{\r\n        if(auth.user && invitee_state==2){\r\n            navigate(\"Main\", {screen:\"HomeScreen\"})\r\n        }\r\n    }, [auth.user])\r\n}","const tintColorLight = '#2f95dc';\r\nconst tintColorDark = '#fff';\r\n\r\nexport default {\r\n  light: {\r\n    text: '#000',\r\n    background: '#fff',\r\n    tint: tintColorLight,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorLight,\r\n    hoverColor:'rgb(242,242,242)',\r\n    buttonBackgroundColor: '#f6f8fa', //'rgba(9,30,66,0.08)',//rgb(242,242,242)\\\r\n    header:'#f6f8fa',\r\n    headerBottomColor:'rgb(216, 216, 216)',\r\n    buttonBorderColor:'rgba(27,31,36,0.15)',\r\n    iconColor: 'black'\r\n  },\r\n  dark: {\r\n    text: '#fff',\r\n    background: '#000',\r\n    tint: tintColorDark,\r\n    tabIconDefault: '#ccc',\r\n    tabIconSelected: tintColorDark,\r\n    hoverColor: '#010409',//'rgb(1,4,9)',\r\n    buttonBackgroundColor: '#010409',//'#282624',\r\n    header:'#010409',\r\n    headerBottomColor:'rgb(40, 40, 40)',\r\n    buttonBorderColor:'rgba(229,225,220,0.15)',\r\n    iconColor: 'white'\r\n  },\r\n  borderColor:'#d0d7de',\r\n  \r\n  focus:'#0065A4',\r\n};\r\n","import React from 'react'\r\nimport { View, StyleSheet, Linking, Platform, TouchableOpacity  } from 'react-native'\r\nimport { } from 'react-native-gesture-handler'\r\nimport { AntDesign } from '../lib/@expo/vector-icons'; \r\nimport Colors from '../constants/Colors';\r\n\r\nconst openURL = Platform.OS=='web'?(url:string)=>{location.href=url}:Linking.openURL\r\n\r\nexport default (props:{theme:'light'|'dark'})=>{\r\n    return<View style={Styles.footer_buttons}>\r\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>openURL(\"https://github.com/blacktokki/tokki-tok\")}>\r\n            <AntDesign name=\"github\" size={24} color={Colors[props.theme].iconColor} />\r\n        </TouchableOpacity>\r\n        <TouchableOpacity style={Styles.footer_button} onPress={()=>Linking.openURL(\"mailto:ydh051541@naver.com\")}>\r\n            <AntDesign name=\"mail\" size={24} color={Colors[props.theme].iconColor} />\r\n        </TouchableOpacity>\r\n    </View>\r\n}\r\n\r\nconst Styles = StyleSheet.create({\r\n      footer_buttons: {\r\n        width: '100%',\r\n        flexDirection: 'row',\r\n        justifyContent: 'flex-end',\r\n        paddingBottom: 20,\r\n        paddingRight: 20,\r\n      },\r\n      footer_button: {\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        width: 38,\r\n        height: 38,\r\n        marginHorizontal: 12,\r\n        borderWidth: 1,\r\n        borderColor: '#E7E7E7',\r\n        borderRadius: 60,\r\n      },\r\n})","import React, {useEffect, useState} from 'react';\r\nimport {\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  View,\r\n  StyleSheet,\r\n} from 'react-native';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport useAuthContext from '../../hooks/useAuthContext';\r\nimport useLangContext from '../../hooks/useLangContext';\r\nimport ContractFooter from '../../components/ContractFooter';\r\n\r\nexport default function LoginScreen({\r\n  navigation, route\r\n}: StackScreenProps<any, 'Login'>) {\r\n  const { lang } = useLangContext()\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const {error, dispatch} = useAuthContext()\r\n  const _login = ()=>dispatch({type:'LOGIN_REQUEST', username, password})\r\n  useEffect(() => {\r\n    navigation.setOptions({\r\n      headerRight: undefined\r\n    });\r\n  }, [navigation]);\r\n\r\n  return (<View style={Styles.login_container}>\r\n    <View style={Styles.login_wrapper}>\r\n      <View style={Styles.form}>\r\n        {error && <View style={Styles.form_error}>\r\n          <Text style={Styles.form_error_text}>{lang(error)}</Text>\r\n        </View>}\r\n        <TextInput\r\n          style={Styles.form_input}\r\n          value={username}\r\n          placeholder={lang('Username')}\r\n          onChangeText={(text) => setUsername(text)}\r\n          autoCapitalize={'none'}\r\n          keyboardType={'email-address'}\r\n          onSubmitEditing={_login}\r\n        />\r\n        <TextInput\r\n          style={Styles.form_input}\r\n          value={password}\r\n          placeholder={lang('Password')}\r\n          secureTextEntry\r\n          onChangeText={(text) => setPassword(text)}\r\n          onSubmitEditing={_login}\r\n        />\r\n        <TouchableOpacity onPress={_login}>\r\n          <View style={Styles.button}>\r\n            <Text style={Styles.button_label}>{lang('Sign in')}</Text>\r\n          </View>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity onPress={() => dispatch({type:\"LOGIN_GUEST\"})}>\r\n          <Text style={Styles.guest_footer_text}>\r\n            {lang(\"Sign in as guest\")}\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={Styles.login_social}>\r\n        <View style={Styles.login_social_separator}>\r\n          <View style={Styles.login_social_separator_line} />\r\n          <Text style={Styles.login_social_separator_text}>{'*'}</Text>\r\n          <View style={Styles.login_social_separator_line} />\r\n        </View>\r\n        <View style={Styles.login_social_buttons}>\r\n        </View>\r\n      </View>\r\n      {/* <>\r\n        <TouchableOpacity onPress={() => navigate(\"RegistrationScreen\")}>\r\n          <Text style={Styles.login_footer_text}>\r\n            {\"Don't have an account? \"}\r\n            <Text style={Styles.login_footer_link}>{'Sign up'}</Text>\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </> */}\r\n    </View>\r\n    <ContractFooter theme='light'/>\r\n  </View>);\r\n};\r\n\r\nconst Styles = StyleSheet.create({\r\n    login_container: {\r\n      flex: 1,\r\n      backgroundColor: '#FFF',\r\n    },\r\n    login_header: {\r\n      alignItems: 'center',\r\n      paddingTop: 30,\r\n      paddingBottom: 50,\r\n      backgroundColor: '#208AEC',\r\n    },\r\n    login_header_logo: {\r\n      width: 220,\r\n      resizeMode: 'contain',\r\n    },\r\n    login_header_text: {\r\n      marginTop: 15,\r\n      color: '#f0f0f0',\r\n      fontSize: 16,\r\n    },\r\n    login_header_text_bold: {\r\n      color: '#fff',\r\n      fontWeight: 'bold',\r\n    },\r\n    login_wrapper: {\r\n      flex: 1,\r\n      justifyContent: 'space-between',\r\n      paddingTop: 40,\r\n      borderTopRightRadius: 12,\r\n      borderTopLeftRadius: 12,\r\n      backgroundColor: '#fff',\r\n      alignItems: 'center',\r\n    },\r\n    form: {\r\n      width: '100%',\r\n      maxWidth: 320,\r\n    },\r\n    form_error: {\r\n      height: 22,\r\n      width:'100%',\r\n    },\r\n    form_error_text:{\r\n      textAlignVertical:'center',\r\n      color:'red',\r\n      fontSize:13,\r\n    },\r\n    form_input: {\r\n      height: 44,\r\n      paddingHorizontal: 20,\r\n      marginBottom: 20,\r\n      backgroundColor: '#EDF0F7',\r\n      borderRadius: 50,\r\n    },\r\n    button: {\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      height: 44,\r\n      backgroundColor: '#0065A4',\r\n      borderRadius: 50,\r\n    },\r\n    button_label: {\r\n      color: '#fff',\r\n      fontSize: 16,\r\n    },\r\n    login_social: {\r\n      width: '100%',\r\n      maxWidth: 280,\r\n      marginTop: 20,\r\n    },\r\n    login_social_separator: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n    },\r\n    login_social_separator_line: {\r\n      flex: 1,\r\n      width: '100%',\r\n      height: 1,\r\n      backgroundColor: '#E0E0E0',\r\n    },\r\n    login_social_separator_text: {\r\n      marginHorizontal: 10,\r\n      color: '#808080',\r\n      fontSize: 16,\r\n    },\r\n    login_social_buttons: {\r\n      flexDirection: 'row',\r\n      justifyContent: 'center',\r\n      marginTop: 20,\r\n    },\r\n    login_social_button: {\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      width: 60,\r\n      height: 60,\r\n      marginHorizontal: 12,\r\n      borderWidth: 1,\r\n      borderColor: '#E7E7E7',\r\n      borderRadius: 60,\r\n    },\r\n    login_social_icon: {\r\n      width: 38,\r\n      height: 38,\r\n      resizeMode: 'contain',\r\n    },\r\n    login_social_facebook: {\r\n      backgroundColor: '#4267B2',\r\n      borderColor: '#4267B2',\r\n    },\r\n    login_footer_text: {\r\n      flexDirection: 'row',\r\n      alignItems: 'center',\r\n      color: '#808080',\r\n      fontSize: 14,\r\n    },\r\n    guest_footer_text: {\r\n      flexDirection: 'row',\r\n      alignSelf: 'center',\r\n      color: '#808080',\r\n      fontSize: 15,\r\n      margin: 15\r\n    },\r\n    login_footer_link: {\r\n      color: '#208AEC',\r\n      fontSize: 15,\r\n      fontWeight: 'bold',\r\n    },\r\n  });\r\n  ","/**\r\n * Learn more about Light and Dark modes:\r\n * https://docs.expo.io/guides/color-schemes/\r\n */\r\n\r\nimport * as React from 'react';\r\nimport { Text as DefaultText, View as DefaultView } from 'react-native';\r\n\r\nimport Colors from '../constants/Colors'\r\nimport useColorScheme from '../hooks/useColorScheme';\r\n\r\nexport function useThemeColor(\r\n  props: { light?: string; dark?: string },\r\n  colorName: keyof typeof Colors.light & keyof typeof Colors.dark\r\n) {\r\n  const theme = useColorScheme();\r\n  const colorFromProps = props[theme];\r\n\r\n  if (colorFromProps) {\r\n    return colorFromProps;\r\n  } else {\r\n    return Colors[theme][colorName];\r\n  }\r\n}\r\n\r\ntype ThemeProps = {\r\n  lightColor?: string;\r\n  darkColor?: string;\r\n};\r\n\r\nexport type TextProps = ThemeProps & DefaultText['props'];\r\nexport type ViewProps = ThemeProps & DefaultView['props'];\r\n\r\nexport function Text(props: TextProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const color = useThemeColor({ light: lightColor, dark: darkColor }, 'text');\r\n\r\n  return <DefaultText style={[{ color }, style]} {...otherProps} />;\r\n}\r\n\r\nexport function View(props: ViewProps) {\r\n  const { style, lightColor, darkColor, ...otherProps } = props;\r\n  const backgroundColor = useThemeColor({ light: lightColor, dark: darkColor }, 'background');\r\n\r\n  return <DefaultView style={[{ backgroundColor }, style]} {...otherProps} />;\r\n}\r\n","import * as React from 'react';\r\nimport { View, Text } from './Themed';\r\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle } from 'react-native';\r\nimport Colors from '../constants/Colors';\r\n\r\nexport type SectionParamList = {\r\n    title?: string,\r\n    titleStyle?:StyleProp<TextStyle>\r\n    outerContainerStyle?:StyleProp<TextStyle>\r\n    containerStyle?:StyleProp<ViewStyle>\r\n    bodyStyle?:StyleProp<ViewStyle>\r\n    subtitle?: string\r\n    withSeparator?: boolean\r\n    autoScale?:boolean\r\n    children?: React.ReactNode\r\n}\r\n\r\nexport default function CommonSection(props:SectionParamList){\r\n  return (\r\n    <View style={[styles.outerContainer, props.autoScale?{}:styles.outerContainerFill, props.outerContainerStyle]}>\r\n        <View style={[styles.container, props.containerStyle]}>\r\n            {props.withSeparator?<View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />:undefined}\r\n            {props.title?<View style={styles.titleView}>\r\n              <Text style={[styles.title, props.titleStyle]}>{props.title}</Text>\r\n              <Text style={styles.subtitle}>{props.subtitle}</Text>\r\n            </View>:undefined}\r\n            <View style={[styles.bodyView, props.bodyStyle]}>\r\n            {props.children}\r\n            </View>\r\n          </View>\r\n        </View>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  outerContainer:{\r\n    alignItems:'stretch',\r\n    backgroundColor:'transparent'\r\n  },\r\n  outerContainerFill:{\r\n    width:'100%',\r\n    maxWidth:1080,\r\n  },\r\n  container: {\r\n      marginHorizontal:20,\r\n      marginVertical: 10,\r\n      backgroundColor:'transparent',\r\n    },\r\n    titleView:{\r\n      width: '100%',\r\n      flexDirection:'row',\r\n      backgroundColor:'transparent',\r\n      marginBottom:5,\r\n    },\r\n    title: {\r\n      flex:1,\r\n      fontSize: 16,\r\n    },\r\n    subtitle: {\r\n      flex:1,\r\n      fontSize: 12,\r\n      textAlign: 'right',\r\n      marginTop:4\r\n    },\r\n    separator: {\r\n      marginBottom: 20,\r\n      height: 1,\r\n      width: '100%',\r\n    },\r\n    bodyView:{\r\n      width: '100%',\r\n      padding: 20,\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      borderWidth:1,\r\n      borderColor:Colors.borderColor,\r\n      borderRadius:6\r\n    }\r\n  });\r\n  ","import React, { useState } from 'react';\r\nimport { Text, StyleSheet, Pressable, StyleProp, ViewStyle} from 'react-native';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { CustomButtonProps } from '../types';\r\n\r\nconst DefaultButton = (props:CustomButtonProps & {borderColor:string})=>{\r\n    const [hover, setHover] = useState(false)\r\n    return <Pressable\r\n        onPress={()=>props.onPress()}\r\n        //@ts-ignore\r\n        onHoverIn={()=>setHover(true)}\r\n        onHoverOut={()=>setHover(false)}\r\n        disabled={props.disabled}\r\n        style={[\r\n            {\r\n                paddingVertical:5, \r\n                paddingHorizontal:16\r\n            },\r\n            props.style,\r\n            (hover || props.disabled)?{backgroundColor:props.color, borderColor:props.borderColor}:{}\r\n        ]}>\r\n            {props.children?props.children:\r\n            <Text selectable={false} style={[{fontSize:14}, props.textStyle]}>{props.title}</Text>}\r\n        </Pressable>\r\n}\r\n\r\nexport default (props:CustomButtonProps)=>{\r\n    const theme = useColorScheme()\r\n    const _props = {\r\n        color:Colors[theme].hoverColor,\r\n        borderColor:theme=='light'?Colors[theme].buttonBorderColor:'#7d8590',\r\n        ...props,\r\n        style:[\r\n            styles.style,\r\n            {\r\n                backgroundColor:Colors[theme].buttonBackgroundColor,\r\n                borderColor:Colors[theme].buttonBorderColor\r\n            },\r\n            props.style,\r\n        ] as StyleProp<ViewStyle>,\r\n        textStyle:[\r\n            styles.text, \r\n            {color:Colors[theme].text},\r\n            props.textStyle\r\n        ]\r\n    }\r\n    return <DefaultButton {..._props}/>\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    style:{\r\n        borderRadius:6, \r\n        borderWidth:1, \r\n    },\r\n    text:{\r\n        textAlign:'center', \r\n        fontWeight:'600'\r\n    }\r\n});\r\n","import React, { createContext, useContext, Dispatch, useReducer } from 'react';\r\n\r\ntype UploadState = Record<number, {\r\n  filename: string,\r\n  progress?: number,\r\n}[]>\r\n\r\ntype UploadAction = {\r\n  channel:number,\r\n  filename:string,\r\n  progress?:number\r\n}\r\n\r\ntype UploadContextType = {\r\n  upload:UploadState,\r\n  dispatch:Dispatch<UploadAction>\r\n}\r\n\r\nconst UploadContext = createContext<UploadContextType>({upload:{} as UploadState, dispatch:()=>{}});\r\n\r\nconst uploadReducer =(initialState:UploadState, action:UploadAction)=>{\r\n  const files = [...(initialState[action.channel] || [])]\r\n  const index = files.findIndex(f=>f.filename==action.filename)\r\n  if (index >= 0){\r\n    files[index] = {filename:action.filename, progress:action.progress} \r\n  }\r\n  else{\r\n    files.push({filename:action.filename, progress:action.progress})\r\n  }\r\n  return {\r\n    ...initialState,\r\n    [action.channel] : files.filter(f=>(f.progress || 0)<1)\r\n  }\r\n}\r\n\r\nexport const UploadContextProvider = ({children}:{children:React.ReactNode})=>{\r\n  const [upload, dispatch] = useReducer(uploadReducer, {})\r\n  return <UploadContext.Provider value={{upload, dispatch}}>\r\n    {children}\r\n  </UploadContext.Provider>\r\n}\r\n\r\nexport default function useUploadContext() {\r\n  const upload = useContext(UploadContext)\r\n  return upload\r\n}","import { useEffect } from \"react\"\r\nimport { InfiniteData, Query, QueryKey, useInfiniteQuery, useMutation, useQueryClient } from \"react-query\"\r\nimport { getMessengerContentList, postMessage, patchMessengerContent, getNewMessengerContentList } from \"../../services\"\r\nimport { EditMessage, MessengerContent } from \"../../types\"\r\nimport useWebsocketContext from \"../useWebsocketContext\"\r\nimport useUploadContext from \"../useUploadContext\"\r\n\r\nexport type MessengerContentPage = {\r\n  next?:MessengerContentPage\r\n  current:MessengerContent[]\r\n}\r\n\r\nconst updateContnetPage = (pages:MessengerContentPage[], updateMessages:MessengerContent[])=>{\r\n  let update_i = 0\r\n  pages.forEach(page=>{\r\n    if (update_i == updateMessages.length)\r\n      return\r\n    page.current.forEach(v=>{\r\n      if (update_i == updateMessages.length)\r\n        return\r\n      if (v.id==updateMessages[update_i].id){\r\n        v.timer = updateMessages[update_i].timer\r\n        v.is_archive = updateMessages[update_i].is_archive\r\n        update_i += 1\r\n      }\r\n    })\r\n    page.current = page.current.filter(v=>!v.is_archive)\r\n  })\r\n}\r\n\r\nexport default function useMessengerContentList(channel_id:number){  \r\n  const queryClient = useQueryClient()\r\n  const refetch = (query:Query<MessengerContentPage, unknown, InfiniteData<MessengerContentPage>, QueryKey>)=>{\r\n    const updated_gte = new Date(query.state.dataUpdatedAt).toISOString()\r\n    const newData = {...query.state.data}\r\n    getNewMessengerContentList(channel_id, updated_gte).then(contents=>{\r\n      if(newData.pages){\r\n        const lastMessageId = newData.pages[0].current[0].id || 0\r\n        const nextMessages = contents.filter(v=>v.id>lastMessageId && v.is_archive==false)\r\n        const updateMessages = contents.filter(v=>v.id<=lastMessageId)\r\n        const timerMessageRefetch = nextMessages.findIndex(v=>v.timer) >= 0 || updateMessages.length > 0\r\n        newData.pages[0].current = [...nextMessages, ...newData.pages[0].current]\r\n        updateContnetPage(newData.pages, updateMessages)\r\n        timerMessageRefetch && queryClient.invalidateQueries([\"TimerMessageContentList\", channel_id])\r\n      }\r\n    })\r\n    return false\r\n  }\r\n  const { data, fetchNextPage } = useInfiniteQuery<MessengerContentPage>(\r\n    [\"MessengerContentList\", channel_id], \r\n    async({pageParam})=>getMessengerContentList(channel_id, pageParam).then(current=>({current})), \r\n    {\r\n      select:data=>{\r\n        if(data.pages.length > 1)\r\n          data.pages[data.pages.length - 2].next = data.pages[data.pages.length - 1]\r\n        return data;\r\n      },\r\n      getNextPageParam:(lastPage)=>lastPage?.current.length?lastPage.current[lastPage.current.length - 1].id:undefined,\r\n      refetchOnReconnect:false,\r\n      refetchOnWindowFocus:refetch\r\n    }\r\n  )\r\n  const { lastJsonMessage } = useWebsocketContext()\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\r\n      if(lastJsonMessage['type']=='next_message'){\r\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\r\n          if(_data?.pages[0].current && _data?.pages[0].current[0].id != lastJsonMessage['data'].id)\r\n            _data.pages[0].current = [lastJsonMessage['data'], ..._data?.pages[0].current]\r\n          return {...(_data || {pages:[], pageParams:[]})}\r\n        })\r\n      }\r\n      if(lastJsonMessage['type']=='update_message'){\r\n        queryClient.setQueryData<InfiniteData<MessengerContentPage>>([\"MessengerContentList\", channel_id], (_data)=>{\r\n          _data?.pages && updateContnetPage(_data.pages, [lastJsonMessage['data']])\r\n          return {...(_data || {pages:[], pageParams:[]})}\r\n        })\r\n      }\r\n    }\r\n  }, [lastJsonMessage])\r\n  return { data, fetchNextPage }\r\n}\r\n\r\nexport function useMessengerContentMutation(channelId?:number){\r\n  // const queryClient = useQueryClient()\r\n  const {dispatch:uploadDispatch} = useUploadContext()\r\n  const create = useMutation((message:EditMessage)=>postMessage(message, uploadDispatch), {\r\n    onSuccess: () => {\r\n      // queryClient.setQueryData(['MessengerContentList'], (data:any) => ({\r\n      //   pages: data.pages.slice(0, 1),\r\n      //   pageParams: data.pageParams.slice(0, 1),\r\n      // }))\r\n      // queryClient.invalidateQueries(\"MessengerContentList\")\r\n    }\r\n  });\r\n  const _patch = useMutation(patchMessengerContent);\r\n  return { create:create.mutate, patch:_patch.mutate }\r\n}","import React, { useState } from 'react';\r\nimport { StyleSheet} from 'react-native';\r\nimport { CustomButtonProps } from '../types';\r\nimport CommonButton from './CommonButton';\r\n\r\nexport default (props:CustomButtonProps)=>{\r\n    return <CommonButton {...props} style={[styles.style, props.style]}/>\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n    style:{\r\n        borderRadius:6, \r\n        backgroundColor: 'transparent',\r\n        borderWidth:0\r\n    },\r\n});\r\n","import React, { useState, createContext, useContext, useEffect } from \"react\";\r\nimport { Modal } from \"react-native\";\r\nimport useResizeContext from \"./useResizeContext\";\r\n\r\ntype ModalProps = any\r\n\r\ntype ModalState = {\r\n  Component:React.ComponentType<ModalProps>,\r\n  props:any\r\n  visible:boolean\r\n}\r\ntype SetModal = (Component:ModalState[\"Component\"]|null, props:ModalProps|null)=>void\r\n\r\nconst ModalsContext = createContext<{setModal: SetModal}>({\r\n    setModal: () => {}\r\n});\r\n\r\nexport const ModalsProvider = ({children, modals:allModals}:{children:React.ReactNode, modals:React.ComponentType<ModalProps>[]}) => {\r\n    const [modals, setModals] = useState<ModalState[]>([]);\r\n    const windowType = useResizeContext();\r\n    const [animationType, setAnimationType] = useState('none')\r\n    const setModal:SetModal = (Component, props) => {\r\n        const newModals = modals.map(m=>{\r\n            if(Component==null){\r\n                return {\r\n                    ...m,\r\n                    visible:false\r\n                }\r\n            }\r\n            else if(m.Component == Component){\r\n                return {\r\n                    Component, \r\n                    props:props!==null?props:m.props,\r\n                    visible:props!==null\r\n                }\r\n            }\r\n            return m        \r\n        })\r\n        setModals(newModals);\r\n    }\r\n    useEffect(()=>{\r\n        if (modals.filter(v=>v.visible).length == 0)\r\n            setAnimationType(windowType == 'landscape'?'fade':'slide')\r\n    }, [windowType])\r\n    useEffect(()=>{\r\n        setModals(allModals.map((Component)=>({Component, props:null, visible:false})))\r\n    }, [allModals])\r\n    return <ModalsContext.Provider value={{setModal}}>\r\n        {children}\r\n        {modals.map((modal, index)=>{\r\n            const { Component, props, visible } = modal;\r\n            return <Modal key={index} animationType={animationType as any} visible={visible} transparent>\r\n                <Component {...props}/>\r\n            </Modal>\r\n        })}\r\n    </ModalsContext.Provider>\r\n}\r\n\r\nexport default ()=>{\r\n    const modalsContext = useContext(ModalsContext)\r\n    return modalsContext\r\n}\r\n\r\n","import React from 'react'\r\nimport CommonSection from \"./CommonSection\";\r\nimport useResizeContext from '../hooks/useResizeContext';\r\n\r\nexport default (props:{children?: React.ReactNode})=>{\r\n    const windowType = useResizeContext();\r\n    return <CommonSection\r\n        autoScale\r\n        outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', flexShrink:1, width:'100%'}}\r\n        containerStyle={{flex:1, margin:0, justifyContent:'center', alignItems:'center'}}\r\n        bodyStyle={windowType=='landscape'?{width:'90%', height:'90%', padding:'5%'}:{width:'100%', height:'100%', maxWidth:1080}}\r\n    >\r\n        {props.children}\r\n    </CommonSection>\r\n}\r\n\r\nexport const BottomSheet = (props:{children?: React.ReactNode})=><CommonSection\r\n    autoScale\r\n    outerContainerStyle={{flex:1, alignSelf:'center', backgroundColor:'#8888', width:'100%'}}\r\n    containerStyle={{flex:1, margin:0, justifyContent:'flex-end'}}\r\n>\r\n    {props.children}\r\n</CommonSection>","import { DependencyList, useEffect } from \"react\";\r\nimport { EventArg, useNavigation } from \"@react-navigation/core\";\r\n\r\n\r\nexport default (callback:()=>void, deps?:DependencyList)=>{\r\n    const navigation = useNavigation()\r\n    useEffect(()=>{\r\n        const event = (e:EventArg<any, true, any>)=> {\r\n            e.preventDefault();\r\n            callback()\r\n        }\r\n        navigation.addListener('beforeRemove', event)\r\n        return () => {\r\n            navigation.removeListener('beforeRemove', event)\r\n        }\r\n  }, deps)\r\n}","import React from 'react';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\n\r\nexport default function AlertModal({type}:{type:string}) {\r\n  const { lang } = useLangContext()\r\n  const { setModal } = useModalsContext()\r\n  const {dispatch} = useAuthContext()\r\n  const back = ()=>{\r\n    setModal(AlertModal, null)\r\n  }\r\n  const messages = {\r\n    \"GUEST_LOGOUT\":{\r\n      message: 'Guest users cannot reconnect after logging out. Please create an account or log in.',\r\n      title: 'sign out',\r\n      onPress: ()=>dispatch({type:\"LOGOUT_REQUEST\"})\r\n    }\r\n  } as Record<string, {message:string, title:string, onPress:()=>void}>\r\n\r\n  useModalEffect(back, [])\r\n  return <BottomSheet>\r\n    <Text>{lang(messages[type].message)}</Text>\r\n    <View style={{width:'100%', flexDirection:'row', justifyContent:'flex-end'}}>\r\n      <CommonButton title={lang(messages[type].title)} onPress={messages[type].onPress}/>\r\n      <CommonButton title={lang('cancel')} onPress={()=>back()}/>\r\n    </View>\r\n  </BottomSheet>\r\n}\r\n","import React from 'react'\r\nimport TextButton from \"./TextButton\"\r\nimport useAuthContext from \"../hooks/useAuthContext\"\r\nimport useResizeContext from '../hooks/useResizeContext'\r\nimport { View } from 'react-native'\r\nimport useModalsContext from '../hooks/useModalsContext'\r\nimport AlertModal from '../modals/AlertModal'\r\nimport useLangContext from '../hooks/useLangContext'\r\nimport useColorScheme from '../hooks/useColorScheme'\r\nimport Colors from '../constants/Colors'\r\n\r\ntype ButtonProps = {title:string, onPress:()=>void, windowType?:'landscape'|'portrait'}\r\n\r\nexport default (props:{extra?:ButtonProps[]})=>{\r\n    const { lang } = useLangContext()\r\n    const theme = useColorScheme()\r\n    const {auth, dispatch} = useAuthContext()\r\n    const { setModal } = useModalsContext()\r\n    const windowType = useResizeContext()\r\n    const defaultButtonProps:ButtonProps[] = [{title:lang('sign out'), onPress:()=>{\r\n        if (auth?.user?.is_guest){\r\n            setModal(AlertModal, {type:\"GUEST_LOGOUT\"})\r\n        }\r\n        else{\r\n            dispatch({type:\"LOGOUT_REQUEST\"})\r\n        }\r\n    }}]\r\n    const buttonProps = (props.extra?[...props.extra, ...defaultButtonProps]:defaultButtonProps).filter(v=>v.windowType==windowType || v.windowType == undefined)\r\n    return<View style={{flexDirection:'row'}}>\r\n        {buttonProps.map((v,k)=><TextButton key={k} {...v} textStyle={{color:Colors[theme].text}} color='#gray'/>)}\r\n    </View>\r\n}\r\n  ","import React from 'react'\r\nimport { Image, Linking } from \"react-native\"\r\nimport { TouchableOpacity } from \"react-native-gesture-handler\"\r\nimport CommonSection from \"./CommonSection\"\r\nimport { View, Text } from \"./Themed\"\r\nimport { Link } from \"../types\"\r\n\r\n\r\n\r\nexport default ({link, isMobile}:{link:Link, isMobile:boolean})=>{\r\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={{padding:0}}>\r\n    <TouchableOpacity \r\n        onPress={()=>Linking.openURL(link.url)}\r\n        onLongPress={()=>{}}\r\n        style={{width:'100%', flexDirection:'row'}}\r\n    >\r\n        {link.image_url?<Image source={{uri:link.image_url}} resizeMode=\"cover\" style={{ width:'100%', maxWidth:isMobile?120:150, maxHeight:isMobile?120:150, borderWidth:1}}/>:undefined}\r\n        <View style={{flex:1, marginHorizontal:20}}>\r\n            <Text style={{fontSize:18}}>{link.title}</Text>\r\n            <Text style={{fontSize:14}}>{link.description}</Text>\r\n            <Text style={{fontSize:12}}>{link.url}</Text>\r\n        </View>\r\n    </TouchableOpacity>\r\n    </CommonSection>\r\n}","import * as React from 'react';\r\nimport { Avatar } from 'react-native-paper';\r\nimport { AvatarProps } from '../../types';\r\n\r\nconst normalizeHash = (hash: number, min: number, max: number) => {\r\n    return Math.floor((hash % (max - min)) + min);\r\n};\r\n\r\nconst stringToHSL = (str: string, initHash?:number) => {\r\n    let hash = initHash || 0;\r\n    for (let i = 0; i < str.length; i++) {\r\n      hash = str.charCodeAt(i) + ((hash << 5) - hash);\r\n    }\r\n    hash = Math.abs(hash);\r\n    return `hsl(${normalizeHash(hash, 0, 360)}, ${normalizeHash(hash, 0, 100)}%, ${normalizeHash(hash, 25, 75)}%)`;\r\n};\r\n\r\nexport default (props:AvatarProps) => {\r\n    const backgroundColor = stringToHSL(props.name, props.userId)\r\n    return <Avatar.Text style={{backgroundColor}} size={props.size} label={props.name.split(' ').map(v=>v[0]).join().toUpperCase()} />\r\n};","import React from 'react';\r\nimport Avatar from '../lib/react-native-paper/Avatar';\r\nimport { AvatarProps, MessengerChannel, User } from '../types';\r\n\r\nexport function avatarFromChannel(item:MessengerChannel, user?:User|null){\r\n    let avatar;\r\n    let name = item.name\r\n    if (item.member_count<3){\r\n        avatar = (item.member_count==1 || user?.id == item.subowner.id)?item.owner:item.subowner\r\n        name = name.length>0?name:avatar.name \r\n    }\r\n    return {avatar, name}\r\n}\r\n\r\nexport default (props:AvatarProps)=>{\r\n    return <Avatar {...props}/>\r\n}\r\n\r\n","import React, { createContext, useContext } from \"react\"\r\nimport { SendJsonMessage } from \"react-use-websocket/dist/lib/types\";\r\nimport { WebSocketInternalProvider } from \"../../hooks/useWebsocketContext\";\r\n\r\nconst WebSocketContext = createContext<{lastJsonMessage:any, sendJsonMessage:SendJsonMessage }>({lastJsonMessage:undefined, sendJsonMessage:()=>{}});\r\n\r\nexport const WebSocketProvider = ({disable, children}:{disable?:boolean, children:React.ReactNode})=>{\r\n  return disable?<></>:<WebSocketInternalProvider path={'messenger/ws/rtc/'} Context={WebSocketContext} useBackground>\r\n    {children}\r\n  </WebSocketInternalProvider>\r\n}\r\n\r\nexport default ()=>{\r\n  const webSocketContext = useContext(WebSocketContext)\r\n  return webSocketContext\r\n}\r\n\r\n","import React, { useCallback, useRef, useState, useMemo } from \"react\";\r\n//@ts-ignore\r\nimport { RTCView, mediaDevices, RTCPeerConnection, MediaStream, RTCSessionDescription, RTCIceCandidate } from \"react-native-webrtc-web-shim\";\r\nimport {TURN_SERVER} from \"../../../constants/Envs\"\r\n\r\n\r\nconsole.log(TURN_SERVER?\"use turn server\": \"use stun server\")\r\n\r\nexport const peerConstraints = {\r\n\ticeServers: [TURN_SERVER?JSON.parse(TURN_SERVER):{urls: 'stun:stun.l.google.com:19302'}]\r\n};\r\n\r\nexport const sessionConstraints = {\r\n\tmandatory: {\r\n\t\tOfferToReceiveAudio: true,\r\n\t\tOfferToReceiveVideo: true,\r\n\t\tVoiceActivityDetection: true\r\n\t}\r\n};\r\n\r\nconst mediaConstraints = {audio:true, video:{framerate:30}}\r\n\r\n//@ts-ignore\r\nexport {MediaStream, RTCPeerConnection, RTCSessionDescription} from \"react-native-webrtc-web-shim\";\r\n\r\nconst onICEcandidate = (pc:typeof RTCPeerConnection, message:any)=>{\r\n\tconst _message = message.data.rtcMessage\r\n\t\tconst candidate = new RTCIceCandidate(_message);\r\n\t\tif (pc) {\r\n\t\t\tconsole.log(\"ICE candidate Added\");\r\n\t\t\tpc.addIceCandidate(candidate);\r\n\t\t}\r\n}\r\n\r\nconst sendICEcandidate = (event:any, sendMessage:(data:any)=>void, receiver:string, target:string) => {\r\n\t// When you find a null candidate then there are no more candidates.\r\n\t// Gathering of candidates has finished.\r\n\tif ( !event.candidate ) { return; };\r\n\t// Send the event.candidate onto the person you're calling.\r\n\t// Keeping to Trickle ICE Standards, you should send the candidates immediately.\r\n\tsendMessage({type:'ICEcandidate', receiver, data:{target, rtcMessage:event.candidate}})\r\n  }\r\n\r\nconst BAND_WIDTH = 8000\r\n\r\nconst optimizeSdp = (offerDescription:RTCSessionDescription)=>{\r\n\tvar arr = offerDescription.sdp.split('\\r\\n');\r\n\tarr.forEach((str:string, i:number) => {\r\n\t\tif (/^a=fmtp:\\d*/.test(str)) {\r\n\t\t\tarr[i] = str + `;x-google-max-bitrate=${BAND_WIDTH};x-google-min-bitrate=${BAND_WIDTH};x-google-start-bitrate=${BAND_WIDTH}`;\r\n\t\t} else if (/^a=mid:(0|video)/.test(str)) { // if with audio then 0=>1\r\n\t\t\tarr[i] += `\\r\\nb=AS:${BAND_WIDTH}`;\r\n\t\t}\r\n\t});\r\n  \treturn new RTCSessionDescription({\r\n    \ttype: offerDescription.type,\r\n    \tsdp: arr.join('\\r\\n'),\r\n  \t})\r\n}\r\n\r\nconst createOffer = async(pcRefCurrent:{pc?:typeof RTCPeerConnection, receiver:string}, sendMessage:(data:any)=>void, stream:typeof MediaStream, target:string, user?:{name:string})=>{\r\n\tstream && pcRefCurrent.pc.addStream( stream );\r\n\tconst offerDescription = optimizeSdp((await pcRefCurrent.pc.createOffer( sessionConstraints )));\r\n\tawait pcRefCurrent.pc.setLocalDescription( offerDescription );\r\n\tsendMessage({type:'call', receiver:pcRefCurrent.receiver, data:{target, name:user?.name, rtcMessage:offerDescription}})\r\n}\r\n\r\nexport const useLocalCam = (sendMessage:(data:any)=>void)=>{\r\n\tconst pcRef = useRef<Record<number,{pc:typeof RTCPeerConnection, receiver:string}>>({})\r\n\tconst [sender, setSender] = useState<string>()\r\n\tconst [_stream, setStream] = useState<MediaStream>()\r\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\r\n\tconst CustomRTCView = useCallback(React.memo(({style}:{style:any})=>(_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>)) , [_stream])\r\n\tconst start = useCallback(async(user:{name:string}, stream?:typeof MediaStream, mode?:'camera'|'display')=>{\r\n\t\tconsole.log(\"start\");\r\n\t\tif (!_stream || mode!==undefined) {\r\n\t\t\ttry {\r\n\t\t\t\tlet newStream:typeof MediaStream;\r\n\t\t\t\tif(mode == 'camera'){\r\n\t\t\t\t\tnewStream = await mediaDevices.getUserMedia(mediaConstraints)\r\n\t\t\t\t}\r\n\t\t\t\telse if (mode == 'display'){\r\n\t\t\t\t\tnewStream = await mediaDevices.getDisplayMedia(mediaConstraints)\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tnewStream = stream || await mediaDevices.getUserMedia(mediaConstraints).catch((e:any)=>mediaDevices.getDisplayMedia(mediaConstraints));\r\n\t\t\t\t}\r\n\t\t\t\tsetStream(newStream)\r\n\t\t\t\tObject.entries(pcRef.current).map(([k, v])=>{\r\n\t\t\t\t\tcreateOffer(v, sendMessage, newStream, 'guest', user)\r\n\t\t\t\t})\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t}\r\n\t}, [_stream])\r\n\tconst stop = useCallback(()=>{\r\n\t\tconsole.log(\"stop\");\r\n\t\tif(_stream){\r\n\t\t\t_stream.getTracks().map((track:any) => track.stop());\r\n\t\t\tsetStream(undefined)\r\n\t\t}\r\n\t}, [_stream])\r\n\treturn {\r\n\t\tstart,\r\n\t\tstop,\r\n\t\twebsocketOnMessage: async(response:any, user:{name:string})=>{\r\n\t\t\tlet type = response.type;\r\n\t\t\tif (type == 'connection'){\r\n\t\t\t\tsetSender(response.data.channel_name)\r\n\t\t\t}\r\n\t\t\tif (type == 'start' && response.data.target=='host'){\r\n\t\t\t  console.log('1 start')\r\n\t\t\t  const peerConnection = new RTCPeerConnection( peerConstraints );\r\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'guest'));\r\n\t\t\t  pcRef.current[response.sender] = {pc:peerConnection, receiver: response.sender}\r\n\t\t\t  createOffer(pcRef.current[response.sender], sendMessage, _stream, 'guest', user)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (type == \"answer\" && response.data.target == 'host'){\r\n\t\t\t  console.log('3 answer')\r\n\t\t\t  const peerConnection = pcRef.current[response.sender].pc\r\n\t\t\t  const answerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t  await peerConnection.setRemoteDescription( answerDescription );\r\n\t\t\t  // const streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t  // setMirrorStream(streams[streams.length - 1])\r\n\t\t\t}\r\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='host'){\r\n\t\t\t\tconst peerConnection = pcRef.current[response.sender].pc\r\n\t\t\t\tonICEcandidate(peerConnection, response)\r\n\t\t\t}\r\n\t\t},\r\n\t\tCustomRTCView,\r\n\t\tisPlay,\r\n\t\tsender,\r\n\t\t// renderMirrorView,\r\n\t}\r\n}\r\n\r\nexport const useRemoteCam = (sendMessage:(data:any)=>void)=>{\r\n\tconst pcRef = useRef<{pc?:RTCPeerConnection, receiver?:string, statsInterval?:any}>({})\r\n\tconst [user, setUser] = useState<{name:string}>()\r\n\tconst [_stream, setStream] = useState<MediaStream>()\r\n\tconst CustomRTCView = useCallback(React.memo((style:any)=>_stream?<RTCView stream={_stream} style={style} videoProps={{height:'100%'}} />:<></>), [_stream])\r\n\tconst isPlay = useMemo(()=>_stream?true:false, [_stream])\r\n\tconst start = useCallback((receiver:string)=>{\r\n\t\tconsole.log(\"start\");\r\n\t\tif (!pcRef.current.pc) {\r\n\t\t  pcRef.current.pc = new RTCPeerConnection( peerConstraints );\r\n\t\t  pcRef.current.receiver = receiver\r\n\t\t}\r\n\t\tif (!_stream){\r\n\t\t\tsendMessage({type:'start', receiver, data:{'target': 'host'}})\r\n\t\t}\r\n\t}, [_stream])\r\n\tconst stop = () => {\r\n\t\tconsole.log(\"stop\");\r\n\t\tif (pcRef.current.pc) {\r\n\t\t  // peerConnection._unregisterEvents();\r\n\t\t  setStream(undefined)\r\n\t\t  pcRef.current.pc.close();\r\n\t\t  pcRef.current.pc = undefined\r\n\t\t  pcRef.current.receiver = undefined\r\n\t\t  clearInterval(pcRef.current.statsInterval)\r\n\t\t}\r\n\t}\r\n\treturn {\r\n\t\tstart,\r\n\t\tstop,\r\n\t\twebsocketOnMessage: async(response:any)=>{\r\n\t\t\tlet type = response.type;\r\n\t\t\tif (type == 'start' && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\r\n\t\t\t\tconsole.log('(remote)1 start')\r\n\t\t\t\tconst peerConnection = pcRef.current.pc\r\n\t\t\t\tsetUser({name: response.data.name})\r\n\t\t\t\tpeerConnection.addEventListener('icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\r\n\t\t\t\tpeerConnection.addEventListener('iceconnectionstatechange', (e:any)=>{\r\n\t\t\t\t\tif (pcRef.current.pc.iceConnectionState == 'connected'){\r\n\t\t\t\t\t\tlet activeStream = false\r\n\t\t\t\t\t\tpcRef.current.statsInterval = setInterval(async()=>{\r\n\t\t\t\t\t\t\tconst stats = await pcRef.current.pc.getStats(null)\r\n\t\t\t\t\t\t\tlet statsOutput = \"\";\r\n\t\t\t\t\t\t\tlet framePerSecond = undefined\r\n\t\t\t\t\t\t\tstats.forEach((report:any) => {\r\n\t\t\t\t\t\t\t\tif (report.type === \"inbound-rtp\" && report.kind === \"video\") {\r\n\t\t\t\t\t\t\t\t\tObject.keys(report).forEach((statName) => {\r\n\t\t\t\t\t\t\t\t\t\tstatsOutput += `${statName}: ${report[statName]}\\n`;\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tframePerSecond = report.framesPerSecond\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tconsole.log(activeStream, framePerSecond)\r\n\t\t\t\t\t\t\tif (framePerSecond != undefined){\r\n\t\t\t\t\t\t\t\tactiveStream = true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse if (activeStream){\r\n\t\t\t\t\t\t\t\tstop()\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconsole.log(new Date().toTimeString().split(' ')[0], statsOutput)\r\n\t\t\t\t\t\t}, 1000);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (pcRef.current.pc.iceConnectionState == 'failed'){\r\n\t\t\t\t\t\tstop()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// peerConnection.addTransceiver('audio', {\r\n\t\t\t\t// \tdirection: 'recvonly'\r\n\t\t\t\t// });\r\n\t\t\t\tpeerConnection.addTransceiver('video', {\r\n\t\t\t\t\tdirection: 'recvonly'\r\n\t\t\t\t});\r\n\t\t\t\tawait createOffer({pc:pcRef.current.pc, receiver:response.sender}, sendMessage, _stream, 'host', user)\r\n\t\t\t}  \r\n\t\t\tif (type == \"answer\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver){\r\n\t\t\t\tconsole.log('(remote)3 answer')\r\n\t\t\t\tconst answerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t\tawait pcRef.current.pc.setRemoteDescription( answerDescription );\r\n\t\t\t\tconst streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t\tsetStream(streams[streams.length - 1])\r\n\t\t\t\tsendMessage({type:'end', receiver:pcRef.current.receiver, data:{}})\r\n\t\t\t}\r\n\t\t\tif (type == \"call\" && response.sender == pcRef.current?.receiver){\r\n\t\t\t  console.log('2 call')\r\n\t\t\t  const peerConnection = pcRef.current.pc\r\n\t\t\t  setUser({name:response.data.name})\r\n\t\t\t  if (!peerConnection)\r\n\t\t\t\treturn\r\n\t\t\t  peerConnection.addEventListener( 'icecandidate', (event:any) => sendICEcandidate(event, sendMessage, response.sender, 'host'));\r\n\t\t\t  const offerDescription = new RTCSessionDescription(response.data.rtcMessage);\r\n\t\t\t  await peerConnection.setRemoteDescription( offerDescription );\r\n\t\t\t  const answerDescription = await peerConnection.createAnswer( sessionConstraints );\r\n\t\t\t  await peerConnection.setLocalDescription( answerDescription );\r\n\t\t\t  sendMessage({type:'answer', receiver:pcRef.current.receiver, data:{target:'host', rtcMessage:peerConnection.localDescription}})\r\n\t\t\t  // Here is a good place to process candidates.\r\n\t\t\t  const streams = pcRef.current.pc.getRemoteStreams()\r\n\t\t\t  setStream(streams[streams.length - 1])\r\n\t\t\t}\r\n\t\t\tif (type == \"ICEcandidate\" && response.data.target=='guest' && response.sender == pcRef.current?.receiver)\r\n\t\t\t  onICEcandidate(pcRef.current.pc, response)\r\n\t\t},\r\n\t\tCustomRTCView,\r\n\t\tuser,\r\n\t\tisPlay\r\n\t}\r\n}","import {StyleSheet} from \"react-native\";\r\nexport {useLocalCam, useRemoteCam} from \"./p2p\"\r\n\r\nexport const camStyle = StyleSheet.create({\r\n\tcontainer:{ flex: 1},\r\n\tcam:{ flex: 1, height:'100%'},\r\n\tbottonContainer: {position:\"absolute\", bottom:0, justifyContent:'flex-end'},\r\n\tbuttonBar: { flexDirection: \"row\", justifyContent: \"space-around\" },\r\n\tlabel: {backgroundColor:'#0008', color:'white', paddingHorizontal:5},\r\n})","import React, { useEffect } from \"react\";\r\nimport {Button, View, Text} from \"react-native\";\r\nimport useWebsocketContext from \"./useWebsocketContext\";\r\nimport { useLocalCam, camStyle} from \"./webrtc\";\r\n\r\n\r\nexport default (props:{user?:{name:string}|null, mode?:'camera'|'display'|null})=>{\r\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\r\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay} = useLocalCam(sendJsonMessage)\r\n  useEffect(()=>{\r\n    props.user && lastJsonMessage && websocketOnMessage(lastJsonMessage, props.user)\r\n  }, [lastJsonMessage, props.user])\r\n  useEffect(()=>{\r\n    if(props.mode && !isPlay){\r\n      props.user && start(props.user, undefined, props.mode)\r\n    }\r\n    else if(props.mode===null && isPlay){\r\n      stop()\r\n    }\r\n    return ()=>{isPlay && stop()}\r\n  }, [isPlay, props.user, props.mode])\r\n  return (\r\n    <View style={camStyle.container}>\r\n      <CustomRTCView style={camStyle.cam}/>\r\n      <View style={camStyle.bottonContainer}>\r\n        <View style={camStyle.buttonBar}>  \r\n        </View>\r\n        <View style={{flexDirection:'row'}}><Text style={camStyle.label}>{props.user?.name}</Text></View>\r\n        <View style={camStyle.buttonBar}>\r\n          {props.mode === undefined && !isPlay && <Button title=\"Start\" onPress={()=>props.user && start(props.user)} />}\r\n          {props.mode === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n","import React, { useState, useEffect, } from \"react\";\r\nimport {Button,Text, TextInput, View} from \"react-native\";\r\nimport useWebsocketContext from \"./useWebsocketContext\";\r\nimport { useRemoteCam, camStyle} from \"./webrtc\";\r\n\r\nexport default (props:{receiver?:string})=>{\r\n  const [receiver, setReceiver] = useState('')\r\n  const {lastJsonMessage, sendJsonMessage} = useWebsocketContext()\r\n  const {start, stop, websocketOnMessage, CustomRTCView, isPlay, user} = useRemoteCam(sendJsonMessage)\r\n  useEffect(()=>{\r\n    lastJsonMessage && websocketOnMessage(lastJsonMessage)\r\n  }, [lastJsonMessage])\r\n  useEffect(()=>{\r\n    if(props.receiver){\r\n      start(props.receiver)\r\n    }\r\n    return ()=>stop()\r\n  }, [props.receiver])\r\n  return (\r\n    <View style={camStyle.container}>\r\n      <CustomRTCView style={camStyle.cam}/>\r\n      <View style={camStyle.bottonContainer}>\r\n        <View style={camStyle.buttonBar}>\r\n        </View>\r\n        <View style={{flexDirection:'row'}}>{\r\n          (props.receiver || isPlay)?\r\n          <Text style={camStyle.label}>{user?.name || 'loading...'}</Text>:\r\n          <>\r\n            <Text style={{borderWidth:1}}>Receiver:&nbsp;</Text>\r\n            <TextInput style={{borderWidth:1, flex:1}} value={receiver} onChangeText={setReceiver}/>\r\n          </> \r\n        }</View>\r\n        <View style={camStyle.buttonBar}>\r\n          {props.receiver === undefined && !isPlay && <Button title=\"Start\" onPress={()=>start(receiver)} />}\r\n          {props.receiver === undefined && isPlay && <Button title=\"Stop\" onPress={stop} />}\r\n        </View>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n\r\n","import React, {useEffect, useState} from 'react';\r\nimport { StyleSheet, View } from 'react-native';\r\nimport { View as ThemedView } from '../../../components/Themed' \r\nimport Colors from '../../../constants/Colors';\r\nimport {default as useRtcContext, WebSocketProvider as RtcProvider} from \"../../../lib/react-native-webrtc/useWebsocketContext\";\r\nimport LocalCam from '../../../lib/react-native-webrtc/LocalCam';\r\nimport RemoteCam from '../../../lib/react-native-webrtc/RemoteCam';\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport CommonButton from '../../../components/CommonButton';\r\nimport { Ionicons } from '../../../lib/@expo/vector-icons';\r\nimport useIsMobile from '../../../hooks/useIsMobile';\r\n\r\ntype VideoType = 'camera'|'display'|null\r\ntype VideoCallProps = {channel_id:number, setDisable:(disable:boolean)=>void, disable?:boolean}\r\n\r\n\r\nconst VideoView = (props:{\r\n  scale:string,\r\n  focusGuest?:string,\r\n  setFocusGuest:(focusGuest?:string)=>void\r\n  receiver?:string\r\n  children:React.ReactNode\r\n})=>{\r\n  return <View style={[{maxWidth:props.scale, maxHeight:props.scale, borderWidth:1, borderColor:Colors.borderColor, backgroundColor:'gray', flexDirection:'row', flexGrow:1}, (props.focusGuest == undefined || props.focusGuest == props.receiver)?{height:'100%'}:{maxWidth:0, height:0}]}>\r\n    <TouchableOpacity style={{flex:1}} containerStyle={{flex:1, justifyContent:'center'}} onPress={()=>props.setFocusGuest(props.focusGuest?undefined:props.receiver)}>\r\n    {props.children}\r\n    </TouchableOpacity>\r\n  </View>\r\n    \r\n  \r\n}\r\n\r\nconst VideoCallContainer = ({channel_id, disable, setDisable}:VideoCallProps)=>{\r\n  const {auth} = useAuthContext()\r\n  const isMobile = useIsMobile()\r\n  const [videoMode, setVideoMode] = useState<VideoType>(null)\r\n  const [guests, setGuests] = useState<string[]>([])\r\n  const [focusGuest, setFocusGuest] = useState<string>()\r\n  const windowType = useResizeContext()\r\n  const { lastJsonMessage, sendJsonMessage } = useRtcContext()\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null){\r\n      if(lastJsonMessage['type']=='connection'){\r\n        sendJsonMessage({'type':'broadcast', 'data':{'channel_id':channel_id}})\r\n      }\r\n      if(lastJsonMessage['type']=='broadcast_guest' || lastJsonMessage['type']=='broadcast_host'){\r\n        setGuests([...guests, lastJsonMessage['sender']])\r\n      }\r\n      if(lastJsonMessage['type']=='broadcast_disconnect'){\r\n        const channel_name = lastJsonMessage['sender']\r\n        const exist = guests.find(v=>v == channel_name)\r\n        exist && setGuests(guests.filter(v=>v != channel_name))\r\n      }\r\n    }\r\n  }, [lastJsonMessage])\r\n  const scale = focusGuest?'100%':`${100 / Math.max(2, Math.ceil(Math.sqrt(guests.length + 1)))}%`\r\n  const toggleVideoMode = (mode:VideoType)=>{\r\n    setVideoMode(videoMode!=mode?mode:null)\r\n  }\r\n  return lastJsonMessage !==undefined ?\r\n    <ThemedView style={[\r\n      {aspectRatio:!disable?16/9:0, borderColor:Colors.borderColor, borderRadius:10},\r\n      windowType=='landscape'?{flexShrink:1, flexGrow:0, height:'100%', borderLeftWidth:1, paddingBottom:65}:{maxHeight:'36%', width:'100%', borderBottomWidth:1}\r\n    ]}>\r\n      <View style={{aspectRatio:focusGuest?undefined:16/9, backgroundColor:'white', flexWrap:'wrap', flexDirection:'row', width:'100%', height:'100%'}}>\r\n        {guests.map((receiver, i)=><VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={receiver}>\r\n          <RemoteCam receiver={receiver}/>\r\n        </VideoView>\r\n        )}\r\n        <VideoView scale={scale} focusGuest={focusGuest} setFocusGuest={setFocusGuest} receiver={auth.user?.name}>\r\n          <LocalCam user={auth.user} mode={videoMode}/>\r\n        </VideoView>\r\n      </View>\r\n      <ThemedView style={[\r\n          {position:'absolute', alignItems:'center', justifyContent:'flex-end', width:'100%',flexDirection:'row'},\r\n          windowType=='landscape'?{bottom:0, paddingTop:15, paddingBottom:10, paddingHorizontal:19}:{backgroundColor:'transparent'}\r\n        ]}>\r\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('camera')}/>\r\n        {!isMobile && <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>toggleVideoMode('display')}/>}\r\n        <CommonButton title={''} style={{height:40, paddingTop:8}} onPress={()=>setDisable(true)}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={'deepskyblue'}/>\r\n        </CommonButton>\r\n      </ThemedView>\r\n    </ThemedView>:\r\n  <></>\r\n  }\r\n  \r\nexport default React.memo(({channel_id, disable, setDisable}:VideoCallProps)=>{\r\n  return <RtcProvider disable={disable}>\r\n    <VideoCallContainer channel_id={channel_id} disable={disable} setDisable={setDisable}/>\r\n  </RtcProvider>\r\n})\r\n","import React from 'react'\r\nimport { Image, Linking, TextStyle } from \"react-native\"\r\nimport {TouchableOpacity} from \"react-native-gesture-handler\"\r\nimport CommonSection from \"./CommonSection\"\r\nimport { FontAwesome } from '../lib/@expo/vector-icons'; \r\nimport { View, Text } from \"./Themed\"\r\nimport { File } from \"../types\"\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport Colors from '../constants/Colors';\r\n\r\nfunction humanFileSize(size:number) {\r\n    var i = size == 0 ? 0 : Math.floor(Math.log(size) / Math.log(1024));\r\n    return (size / Math.pow(1024, i)).toFixed(2) + ' ' + ['B', 'kB', 'MB', 'GB', 'TB'][i];\r\n  }\r\n  \r\n\r\nexport default ({file, isMobile, showBorder}:{file:File, isMobile:boolean, showBorder:ConstrainBoolean})=>{\r\n    const theme = useColorScheme()\r\n    return <CommonSection containerStyle={{marginHorizontal:0}} bodyStyle={showBorder?{padding:10}:{borderWidth:0, padding:0}}>\r\n    <TouchableOpacity \r\n        onPress={()=>Linking.openURL(file.file)} \r\n        onLongPress={()=>{}}\r\n        style={{flexDirection:'row', alignItems:'flex-start', width:'100%'}} \r\n    >\r\n        {   file.thumbnail?\r\n            <Image source={{uri:file.thumbnail}} resizeMode=\"cover\" style={{width:isMobile?120:150, height:isMobile?120:150, borderWidth:1}}/>:\r\n            <FontAwesome name=\"file-o\" size={20} color={Colors[theme].iconColor} />}\r\n        <View style={{flex:1, marginHorizontal:10}}>\r\n            <Text style={{fontSize:18}}>{file.filename}</Text>\r\n            <Text style={{fontSize:14}}>{humanFileSize(file.filesize)}</Text>\r\n        </View>\r\n    </TouchableOpacity>\r\n    </CommonSection>\r\n}","import { useMutation, useQuery, useQueryClient } from \"react-query\";\r\nimport { deleteUser, getUserMembershipList, patchUser, postUser } from \"../../services\";\r\nimport useAuthContext, { Auth } from \"../useAuthContext\";\r\n\r\nexport default function useUserMembershipList(auth?:Auth){\r\n  const { data } = useQuery([\"UserMembershipList\", auth?.groupId] , async()=>auth?.groupId?(await getUserMembershipList(auth?.groupId)):[])\r\n  return data\r\n}\r\n\r\nexport function useUserMembershipMutation(){\r\n  const queryClient = useQueryClient()\r\n  const { auth, dispatch } = useAuthContext()\r\n  const _create = useMutation(postUser, {\r\n    onSuccess: ()=>{\r\n      queryClient.invalidateQueries(\"UserMembershipList\")\r\n    }\r\n  })\r\n  const _update = useMutation(patchUser, {\r\n    onSuccess: (data, user)=>{\r\n      queryClient.invalidateQueries(\"UserMembershipList\")\r\n      if (user.id == auth.user?.id)\r\n        dispatch({type:\"REFRESH\"})\r\n      \r\n    }\r\n  })\r\n  const _delete = useMutation(deleteUser, {\r\n    onSuccess: (data, id)=>{\r\n      queryClient.invalidateQueries(\"UserMembershipList\")\r\n      if (id == auth.user?.id)\r\n        dispatch({type:\"LOGOUT_REQUEST\"})\r\n    }\r\n  })\r\n  return {create:_create.mutateAsync, update:_update.mutateAsync, delete:_delete.mutateAsync}\r\n}","import React, { useState } from 'react';\r\nimport { TextInput } from 'react-native';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { CustomTextInputProps } from '../types';\r\n\r\nexport default (props:CustomTextInputProps)=>{\r\n    const [contentHeight, setContentHeight] = useState<number>()\r\n    const minHeight = props.minHeight || 30\r\n    const theme = useColorScheme()\r\n    return <TextInput style={[{\r\n            borderColor:'#d0d7de', \r\n            fontSize:16, \r\n            borderWidth:1, \r\n            borderRadius:6, \r\n            paddingHorizontal:10, \r\n            paddingVertical:3, \r\n            backgroundColor:Colors[theme].background,\r\n            color:Colors[theme].text,\r\n            height:props.multiline?contentHeight:minHeight,\r\n        }, props.style]}\r\n        placeholder={props.placeholder}\r\n        editable={!props.disabled} \r\n        keyboardType={props.keyboardType}\r\n        secureTextEntry={props.secureTextEntry}\r\n        value={props.value}\r\n        onChangeText={props.setValue}\r\n        onContentSizeChange={props.multiline?(e) => setContentHeight(Math.max(e.nativeEvent.contentSize.height, minHeight) + 2):undefined}\r\n        onBlur={()=>props.onBlur?.(props.value)}\r\n        onEndEditing={()=>props.onEndEditing?.(props.value)}\r\n        multiline={props.multiline}\r\n    />\r\n}","import React, { useMemo } from 'react';\r\n\r\nimport { TextProps, StyleProp } from 'react-native';\r\nimport {View, Text } from './Themed'\r\nimport useResizeContext from '../hooks/useResizeContext';\r\n\r\ntype Props = {\r\n  name: string,\r\n  width?:any,\r\n  children: React.ReactNode\r\n  textStyle?: StyleProp<TextProps>\r\n}\r\n\r\nexport default function RowField(props:Props) {\r\n  const windowType = useResizeContext()\r\n  const rowStyle = useMemo(()=>windowType=='landscape'?\r\n    {flexDirection:'row', alignItems: 'center', justifyContent:'space-between'}:\r\n    {flexDirection:'column', alignItems:'flex-start'} as any\r\n  , [windowType])\r\n  return (\r\n    <View style={[{paddingVertical:windowType=='landscape'?15:5, width:'100%'}, rowStyle]}>\r\n        <Text style={[windowType=='landscape'?{flex:1}:{width:'100%'},{paddingHorizontal: 15, fontSize:16}, props.textStyle]}>{props.name}</Text>\r\n        <View style={[windowType=='landscape'?{flex:6}:{width:'100%'},{paddingHorizontal: 15}]}>\r\n          <View style={{width:props.width}}>\r\n            {props.children}\r\n          </View>\r\n        </View>\r\n    </View>\r\n  )\r\n}","import React from 'react';\r\nimport { StyleProp, TextStyle } from 'react-native';\r\nimport { CustomTextInputProps } from '../types';\r\nimport CommonTextInput from './CommonTextInput';\r\nimport RowField from './RowField';\r\n\r\nexport default function TextField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\r\n  return (\r\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\r\n      <CommonTextInput {...props} />\r\n   </RowField>\r\n  )\r\n}","import { useMemo, useReducer } from \"react\"\r\n\r\ntype LocalSearchAction = {type:string, keyword?:string}\r\n\r\ntype LocalSearchState ={active:boolean, keyword:string}\r\n\r\n\r\n\r\nconst localSearchReducer =(initialState:LocalSearchState, action:LocalSearchAction)=>{\r\n    switch (action.type){\r\n        case 'SEARCH':\r\n          return {\r\n            ...initialState,\r\n            keyword: action.keyword\r\n          } as LocalSearchState\r\n        case 'ENABLE_SEARCH':\r\n          return {\r\n            ...initialState,\r\n            active:true,\r\n          }\r\n        case 'DISABLE_SEARCH':\r\n            return{\r\n                ...initialState,\r\n                active:false,\r\n                keyword: ''\r\n            }\r\n        default:\r\n            throw new Error( `Unhandled action type: ${action.type}`)\r\n    }\r\n  }\r\n\r\n\r\nexport default function useLocalSearch<T>(target:T[], compare:(value:T, keyword:string)=>boolean) {\r\n  const [searchState, dispatch] = useReducer(localSearchReducer, {active:false, keyword:''})\r\n  const data = useMemo(()=>searchState.active?target.filter(v=>compare(v, searchState.keyword)):target, [searchState, target])\r\n  return {searchState, dispatch, data}\r\n}","import React from 'react';\r\nimport { TabView, SceneMap,NavigationState, SceneRendererProps, TabBar } from 'react-native-tab-view';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { TabViewRecord } from '../types';\r\n\r\n\r\nexport default (props:{tabs:TabViewRecord, tabBarPosition:\"top\"|\"bottom\", index?:number, onTab?:(index:number)=>void})=>{\r\n  const { lang } = useLangContext()\r\n  const [index, setIndex] = React.useState(props.index || 0);\r\n  const theme = useColorScheme()\r\n  const entries = Object.entries(props.tabs)\r\n  const onTab = props.onTab\r\n  const icons = Object.assign({}, ...entries.map(([k, v])=>({[k]:v.icon})))\r\n  return <TabView\r\n    renderTabBar={(props:SceneRendererProps & {navigationState: NavigationState<any>})=>{\r\n      return <TabBar\r\n        {...props}\r\n        indicatorStyle={{ backgroundColor: \"#2196F3\" }}\r\n        style={{ backgroundColor:Colors[theme].background }}\r\n        activeColor={Colors[theme].text}\r\n        inactiveColor={Colors[theme].text}\r\n        renderIcon={(scene)=>icons[scene.route.key]}\r\n        onTabPress={(scene)=>onTab?.(entries.findIndex(([k, v])=>k == scene.route.key))}\r\n      />\r\n    }}\r\n    navigationState={{ index, routes: entries.map(([k, v])=>({key:k, title:lang(v.title)}))}}\r\n    onIndexChange={setIndex}\r\n    renderScene={SceneMap(Object.assign({}, ...entries.map(([k, v])=>({[k]:v.component}))))}\r\n    tabBarPosition={props.tabBarPosition}\r\n  />\r\n}\r\n\r\n","import * as React from 'react';\r\nimport { View } from './Themed';\r\nimport { StyleSheet, StyleProp, ViewStyle, TextStyle, Pressable } from 'react-native';\r\nimport Colors from '../constants/Colors';\r\n\r\nexport type ItemParamList = {\r\n    outerContainerStyle?:StyleProp<TextStyle>\r\n    containerStyle?:StyleProp<ViewStyle>\r\n    bodyStyle?:StyleProp<ViewStyle>\r\n    children?: React.ReactNode\r\n    onPress?: ()=>void\r\n}\r\n\r\nexport default function CommonItem(props:ItemParamList){\r\n  // const [hover, setHover] = React.useState(false)\r\n  const [press, setPress] = React.useState(false)\r\n  return (\r\n    <Pressable\r\n      style={[styles.outerContainer ,props.outerContainerStyle, (press)?{backgroundColor:'rgb(242,242,242)'}:{}]}\r\n      onPressIn={()=>setPress(true)}\r\n      onPress={()=>props.onPress?.()}\r\n      onPressOut={()=>setPress(false)}\r\n      //  //@ts-ignore\r\n      //  onHoverIn={()=>setHover(true)}\r\n      //  onHoverOut={()=>setHover(false)}\r\n    >\r\n        <View style={[styles.container ,props.containerStyle]}>\r\n            <View style={[styles.bodyView, props.bodyStyle]}>\r\n                <>{props.children}</>\r\n            </View>\r\n      </View>\r\n    </Pressable>\r\n    )\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  outerContainer:{\r\n    width:'100%',\r\n    maxWidth:1080,\r\n    alignItems:'stretch',\r\n  },  \r\n  container: {\r\n      marginHorizontal:20,\r\n      backgroundColor:'transparent'\r\n    },\r\n    bodyView:{\r\n      width: '100%',\r\n      padding: 10,\r\n      minHeight: 40,\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      borderBottomWidth:1,\r\n      borderColor:Colors.borderColor,\r\n      backgroundColor:'transparent'\r\n    }\r\n  });\r\n  ","import React from \"react\"\r\nimport CommonItem from \"./CommonItem\"\r\nimport { UserMembership } from \"../types\"\r\nimport Avatar from \"./Avatar\"\r\nimport { Text, View } from \"./Themed\"\r\n\r\nexport default ({member:item, onPress}:{member:UserMembership, onPress?:()=>void})=> {\r\n    return <CommonItem key={item.id} bodyStyle={{flexDirection:'row', justifyContent:'flex-start'}} onPress={onPress}>\r\n        <View style={{marginTop:4, marginRight:12}}><Avatar name={item.name} userId={item.id} size={44}/></View>\r\n        <Text style={{fontSize:20, fontWeight:'400'}}>{item.name}</Text>\r\n    </CommonItem>\r\n}","\r\nimport React, {useState} from 'react';\r\nimport { StyleProp, TextStyle, View } from 'react-native';\r\nimport Clipboard from '@react-native-clipboard/clipboard';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { CustomTextInputProps } from '../types';\r\nimport CommonButton from './CommonButton';\r\nimport RowField from './RowField';\r\nimport { Text } from './Themed';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\n\r\nexport default function CopyField(props:CustomTextInputProps & {name: string, width?:any, textStyle?:StyleProp<TextStyle>}) {\r\n  const { lang } = useLangContext()\r\n  const windowType = useResizeContext()\r\n  const [copied, setCopied] = useState(false)\r\n  return (\r\n    <RowField name={props.name} width={props.width} textStyle={props.textStyle}>\r\n      <View style={{flexDirection:windowType=='landscape'?'row':'column', justifyContent:'space-between'}}>\r\n        <View style={{justifyContent:'center'}}>\r\n          <Text style={{fontSize:16}}>{props.value}</Text>\r\n        </View>\r\n        <View>\r\n          <CommonButton title={lang('copy')} onPress={()=>{Clipboard.setString(props.value);setCopied(true)}}/>\r\n          {copied && <Text style={{fontSize:12, alignSelf:'center', color:'red'}}>{lang(\"copied\")}</Text>}\r\n        </View>\r\n      </View>\r\n   </RowField>\r\n  )\r\n}","import React, {useRef,MutableRefObject, useMemo, useState, useEffect } from 'react';\r\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\r\nimport { View, Text } from '../components/Themed';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport { TabViewRecord, UserMembership } from '../types';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useMessengerMemberList, { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport useExternalMembershipList from '../hooks/lists/useExternalMembershipList';\r\nimport TextField from '../components/TextField';\r\nimport useLocalSearch from '../hooks/useLocalSearch';\r\nimport TabView from '../components/TabView';\r\nimport { FlatList, TouchableOpacity } from 'react-native-gesture-handler';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport MemberItem from '../components/MemberItem';\r\nimport ModalSection from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\nimport CopyField from '../components/CopyField';\r\n\r\nconst InviteItem = (props:{item:UserMembership, selectedRef:MutableRefObject<Set<number>>})=>{\r\n  const [selected, setSelected] = useState(props.selectedRef.current.has(props.item.id))\r\n  return <View style={selected?{borderWidth:1, borderColor:'blue'}:{}}>\r\n    <MemberItem member={props.item} onPress={()=>{\r\n      if (selected){\r\n        setSelected(false)\r\n        props.selectedRef.current.delete(props.item.id)\r\n      }\r\n      else{\r\n        setSelected(true)\r\n        props.selectedRef.current.add(props.item.id)\r\n      }\r\n    }}/>\r\n  </View>\r\n\r\n}\r\ntype InviteTabViewProps = {\r\n  id:number,\r\n  selectedRef:MutableRefObject<Set<number>>\r\n}\r\n\r\nconst GroupTabView = ({id, selectedRef}:InviteTabViewProps)=>{\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const memberList = useMessengerMemberList(id)\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  const rawData = useMemo(()=>{\r\n    const memberSet = new Set(memberList?.map(v=>v.user))\r\n    return userList?.filter(v=>!memberSet.has(v.id)) || []\r\n  }, [userList, memberList])\r\n  const {data, dispatch:dispatchKeyword, searchState} = useLocalSearch(rawData, (v, keyword)=>(v.username.includes(keyword) || v.name.includes(keyword)))\r\n  const search = (k:string)=>{\r\n    if (k?.length>0){\r\n      dispatchKeyword({type:'ENABLE_SEARCH'})\r\n      dispatchKeyword({type:'SEARCH', keyword:k})\r\n    }\r\n    else{\r\n      dispatchKeyword({type:'DISABLE_SEARCH'})\r\n    }\r\n  }\r\n  const back = ()=>{\r\n    setModal(InviteModal, null)\r\n  }\r\n  useModalEffect(back, [])\r\n  return <View style={{alignItems:'center', flex:1}}>\r\n    <View style={{'width': '100%', flex:1}}>\r\n      <TextField name={`${lang('Username')} & ${lang('Name')}`} placeholder={auth.user?.name} value={searchState.keyword} setValue={search} width={'80%'}/>\r\n      {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\r\n    </View>\r\n    <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\r\n      <CommonButton title={lang('invite')} onPress={()=>{\r\n        messengerMemberMutation.invite({\r\n          channel_id:id,\r\n          user_ids:[...selectedRef.current]\r\n        }).then(back)\r\n      }}/>\r\n      <CommonButton title={lang('cancel')} onPress={back}/>\r\n    </View>\r\n  </View>\r\n}\r\n\r\nconst DELAY = 500\r\n\r\nconst ExternalMembershipTabView = ({id, selectedRef}:InviteTabViewProps)=>{\r\n  const { lang } = useLangContext()\r\n  const [value, setValue] = useState('')\r\n  const [keyword, setKeyword] = useState('')\r\n  const [copied, setCopied] = useState(false)\r\n  const timeoutRef = useRef<NodeJS.Timeout>()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const memberList = useMessengerMemberList(id)\r\n  const externalMemberList = useExternalMembershipList(keyword)\r\n  const data = useMemo(()=>{\r\n    const memberSet = new Set(memberList?.map(v=>v.user))\r\n    return externalMemberList?.filter(v=>!memberSet.has(v.id)) || []\r\n  }, [externalMemberList, memberList])\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  useEffect(()=>{\r\n    timeoutRef.current = setTimeout(()=>{\r\n      setKeyword(value)\r\n    }, DELAY)\r\n    return ()=>{timeoutRef.current && clearTimeout(timeoutRef.current)}\r\n  }, [value])\r\n  const back = ()=>{\r\n    setModal(InviteModal, null)\r\n  }\r\n  const inviteLink = location.href.replace('chat', 'invitee')\r\n  return <View style={{alignItems:'center', flex:1}}>\r\n  <View style={{'width': '100%', flex:1, paddingVertical:10}}>\r\n    <CopyField name={lang('invite link')} width={'80%'} value={inviteLink}/>\r\n    <View style={{marginVertical: 10, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    <TextField name={lang('Username')} placeholder={auth.user?.username} value={value} setValue={setValue} width={'80%'}/>\r\n    {id && data && <FlatList contentContainerStyle={{flexGrow:1}} data={data} renderItem={({item})=><InviteItem item={item} selectedRef={selectedRef}/>}/>}\r\n  </View>\r\n  <View style={[{width:'100%', flexDirection:'row', padding:10,}, {justifyContent:'flex-end'}]}>\r\n    <CommonButton title={lang('invite')} onPress={()=>{\r\n      messengerMemberMutation.invite({\r\n        channel_id:id,\r\n        user_ids:[...selectedRef.current]\r\n      }).then(back)\r\n    }}/>\r\n    <CommonButton title={lang('cancel')} onPress={back}/>\r\n  </View>\r\n</View>\r\n}\r\n\r\nexport default function InviteModal({id}:{id:number}) {\r\n  const { lang } = useLangContext()\r\n  const selectedRef = useRef<Set<number>>(new Set())\r\n  const drawerTabs:TabViewRecord = {\r\n    group:{\r\n      title: 'Group',\r\n      component: ()=><GroupTabView id={id} selectedRef={selectedRef}/>,\r\n      icon: <></>\r\n    },\r\n    external:{\r\n      title: 'External members',\r\n      component: ()=><ExternalMembershipTabView id={id} selectedRef={selectedRef}/>,\r\n      icon: <></>\r\n    }\r\n  }\r\n  return <ModalSection>\r\n    <View style={{flex:1, width:'100%'}}>\r\n      <View style={{width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{lang('invite')}</Text>\r\n        <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n      </View>\r\n      <TabView tabs={drawerTabs} tabBarPosition={\"top\"}/>\r\n    </View>\r\n  </ModalSection>\r\n}\r\n\r\n","import { useQuery } from \"react-query\";\r\nimport { getExternalMembershipList } from \"../../services\";\r\n\r\nexport default function useExternalMembershipList(keyword?:string){\r\n  const { data } = useQuery([\"UserMembershipList\", keyword] , async()=>keyword?(await getExternalMembershipList(keyword)):[])\r\n  return data\r\n}","import React, { Suspense, useState } from 'react';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport dayjs from 'dayjs';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nconst dayTypes = ['AM', 'PM'].map(value=>({label:value, value}))\r\nconst hours = [...Array(12).keys()].map((value, index)=>(index + 1).toString().padStart(2, '0')).map(value=>({label:value, value}))\r\nconst minutes = [...Array(12).keys()].map((value, index)=>(index * 5).toString().padStart(2, '0')).map(value=>({label:value, value}))\r\n\r\n\r\nconst getDisableDays=(date:dayjs.Dayjs)=>{\r\n  let startDate = date.clone().startOf('month').add(-1, 'month')\r\n  const endDate = date.clone().endOf('month').add(1, 'month')\r\n  const today = dayjs().startOf('day')\r\n  const result = []\r\n  while(startDate<=endDate && startDate<today){\r\n    result.push(startDate.format('YYYY-MM-DD'))\r\n    startDate = startDate.add(1, 'day')\r\n  }\r\n  return result\r\n}\r\n\r\nconst defaultDayjs = ()=>{\r\n  const m = dayjs()\r\n  const restMinute = parseInt(m.format('mm')) % 5\r\n  return m.add(5-restMinute, 'minute')\r\n}\r\n\r\nconst Calendar = React.lazy(()=> import('../components/Calendar'))\r\nconst CommonPicker = React.lazy(()=>import('../components/CommonPicker'))\r\n\r\nexport default function DateTimePickerModal({datetime, callback}:{datetime?:string, callback:(datetime?:string)=>void}) {\r\n  const _dayjs = datetime?dayjs(datetime):defaultDayjs()\r\n  const { lang, locale } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const [date, setDate] = useState(_dayjs.format('YYYY-MM-DD'));\r\n  const [dayType, setDayType] = useState(_dayjs.locale('en').format('A'))\r\n  const [hour, setHour] = useState(_dayjs.format('hh'))\r\n  const [minute, setMinute] = useState(_dayjs.format('mm'))\r\n  const [disableDays, setDisableDays] = useState<string[]>(getDisableDays(_dayjs))\r\n  const { setModal } = useModalsContext()\r\n  const back = ()=>{\r\n    setModal(DateTimePickerModal, null)\r\n  }\r\n  useModalEffect(back, [])\r\n  return <BottomSheet>\r\n    <View style={{flexDirection:'row', width:'100%'}}>\r\n      <View style={{flex:1, flexDirection:'row'}}>\r\n        <TouchableOpacity onPress={back}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={{flex:1}}>\r\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Date & Time')}</Text>\r\n      </View>\r\n      <View style={{flex:1}}/>\r\n    </View>\r\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    <Suspense fallback={<></>}>\r\n      <Calendar\r\n        locale={locale}\r\n        style={undefined} \r\n        setDate={setDate}\r\n        disableAllTouchEventsForDisabledDays={true}\r\n        onMonthChange={(v)=>setDisableDays(getDisableDays(dayjs(v.dateString)))}\r\n        markedDates={{\r\n          ...disableDays.reduce((p, c)=>{p[c]={disabled:true};return p}, {} as Record<string, any>),\r\n          ...(date?[date]:[]).reduce((p, c)=>{p[c]={selected:true};return p}, {} as Record<string, any>)\r\n        }}\r\n      />\r\n      <View style={{flexDirection:'row', paddingVertical:10, width:400, height:50}}>\r\n        <CommonPicker value={dayType} setValue={setDayType} values={dayTypes}/>\r\n        <Text style={{fontSize:20}}> </Text>\r\n        <CommonPicker value={hour} setValue={setHour} values={hours}/>\r\n        <Text style={{fontSize:20}}> : </Text>\r\n        <CommonPicker value={minute} setValue={setMinute} values={minutes}/>\r\n      </View>\r\n    </Suspense>\r\n    <View style={{flexDirection:'row'}}>\r\n      <CommonButton title={lang('save')} onPress={()=>{\r\n        callback?.(dayjs(`${date} ${hour}:${minute} ${dayType}`).toISOString())\r\n        back()\r\n      }}/>\r\n      <CommonButton title={lang('cancel')} onPress={()=>{\r\n        callback?.(undefined)\r\n        back()\r\n      }}/>\r\n      \r\n    </View>\r\n  </BottomSheet>\r\n}\r\n","import React, {useState, useEffect} from \"react\"\r\nimport dayjs from \"dayjs\";\r\nimport {View, TouchableOpacity} from 'react-native'\r\nimport { Text } from \"../../../components/Themed\";\r\nimport useTimerMessageContentList from \"../../../hooks/lists/useTimerMessageContent\";\r\nimport { MessengerContent } from \"../../../types\";\r\nimport Avatar from \"../../../components/Avatar\";\r\nimport Hyperlink from \"react-native-hyperlink\";\r\n\r\nexport function timerFormat(datetime:string){\r\n    return _timerFormat(dayjs(datetime), dayjs())\r\n}\r\n\r\nfunction _timerFormat(m:dayjs.Dayjs, now:dayjs.Dayjs){\r\n    if (m.year() != now.year()){\r\n        return m.format('YYYY.MM')\r\n    }\r\n    if(m.month()!= now.month() || m.date() != now.date()){\r\n        return m.format('MM.DD')\r\n    }\r\n    return m.format('HH:mm')\r\n  }\r\n\r\nexport function timerToString(timer:string){\r\n    return dayjs(timer).format('YYYY.MM.DD HH:mm')\r\n}\r\n\r\nconst TimerTag = (props:{data:MessengerContent, now:dayjs.Dayjs, isExpand:boolean, setExpand:(id?:number)=>void})=>{\r\n    const start = dayjs(props.data.created)\r\n    const end = dayjs(props.data.timer)\r\n    const ratio = (start.diff(props.now)/start.diff(end))\r\n    return <TouchableOpacity onPress={()=>props.setExpand(props.isExpand?undefined:props.data.id)}>\r\n        <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\r\n            <View style={{backgroundColor:'darkgray', position:'absolute', width:`${ratio*100}%`, height:'100%'}}/>\r\n            {props.isExpand?\r\n            <View style={{paddingVertical:5, paddingHorizontal:5, maxWidth:270}}>\r\n                <View style={{flexDirection:'row'}}>\r\n                    <Avatar name={props.data.name} userId={props.data.user} size={20}/>\r\n                    <View style={{paddingHorizontal:5}}><Text>{props.data.name}</Text></View>\r\n                </View>\r\n                {props.data.timer &&\r\n                <View style={{flexDirection:'row', alignItems:'stretch'}}>\r\n                    <Text></Text>\r\n                    <Text selectable>{timerToString(props.data.timer)}</Text>\r\n                </View>}\r\n                {/* @ts-ignore */}\r\n                <Hyperlink linkDefault={ true } style={{wordBreak:\"break-word\"}} linkStyle={{color: '#12b886'}}>\r\n                    <Text selectable>{props.data.message_set[0].content}</Text>\r\n                </Hyperlink>\r\n            </View>:    \r\n            <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\r\n                <Avatar name={props.data.name} userId={props.data.user} size={20}/>\r\n                <View style={{paddingHorizontal:5}}><Text>{_timerFormat(end, props.now)}</Text></View>\r\n            </View>}\r\n        </View>\r\n    </TouchableOpacity>\r\n}\r\n\r\n\r\nexport default (props:{channel_id:number})=>{\r\n    const timerMessages = useTimerMessageContentList(props.channel_id)\r\n    const [now, setNow] = useState(dayjs())\r\n    const [expand, setExpand] = useState<number>()\r\n    useEffect(()=>{\r\n        const timeout = setTimeout(()=>{\r\n            setNow(dayjs())\r\n        }, 2000)\r\n        return ()=>clearTimeout(timeout)\r\n    }, [now])\r\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:20}}>\r\n        {timerMessages?.map((v,i)=><TimerTag key={i} data={v} now={now} isExpand={v.id==expand} setExpand={setExpand}/>)}\r\n    </View>\r\n}","import { useEffect, useMemo } from \"react\"\r\nimport { useQuery, useQueryClient } from \"react-query\"\r\nimport { getTimerMessageContentList } from \"../../services\"\r\nimport { MessengerContent } from \"../../types\"\r\nimport useWebsocketContext from \"../useWebsocketContext\"\r\nimport dayjs from \"dayjs\"\r\n\r\nexport default function useTimerMessageContentList(channel_id:number){  \r\n  const queryClient = useQueryClient()\r\n  const { data } = useQuery<MessengerContent[]>(\r\n    [\"TimerMessageContentList\", channel_id], \r\n    async()=>await getTimerMessageContentList(channel_id, dayjs().toISOString()), \r\n    {\r\n      refetchOnReconnect:false,\r\n      refetchOnWindowFocus:false\r\n    }\r\n  )\r\n  const { lastJsonMessage } = useWebsocketContext()\r\n  useEffect(()=>{\r\n    if(lastJsonMessage !=null && lastJsonMessage['data']['channel'] == channel_id){\r\n      if(lastJsonMessage['type']=='next_message'){\r\n        if(lastJsonMessage['data']['timer'] && dayjs() < dayjs(lastJsonMessage['data']['timer']))\r\n          queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\r\n            return [...(_data || []), lastJsonMessage['data']]\r\n          })\r\n      }\r\n      if(lastJsonMessage['type']=='update_message'){\r\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\r\n          return [...(_data?.filter(v=>v.id!=lastJsonMessage['data'].id || (lastJsonMessage['data']['timer']!=null && !lastJsonMessage['data']['is_archive'])) || [])]\r\n        })\r\n      }\r\n    }\r\n  }, [lastJsonMessage])\r\n  const sorted = useMemo(()=>data?.sort((a, b)=>(a.timer || '') > (b.timer || '')?1:-1), [data])\r\n  useEffect(()=>{\r\n    if (sorted?.[0]?.timer){\r\n      const id = sorted[0].id\r\n      const ms = Math.min(dayjs(sorted[0].timer).diff(dayjs()), Number.MAX_VALUE)\r\n      let timeout = setTimeout(()=>{\r\n        queryClient.setQueryData<MessengerContent[]>([\"TimerMessageContentList\", channel_id], (_data)=>{\r\n          return (_data || []).filter(v=>v.id!=id || dayjs(v.timer).diff(dayjs()) > 0)\r\n        })\r\n      }, ms)\r\n      return ()=>clearTimeout(timeout)\r\n    }\r\n  },[sorted])\r\n  return sorted\r\n}\r\n","import React from 'react';\r\nimport Clipboard from '@react-native-clipboard/clipboard/dist';\r\nimport CommonButton from '../components/CommonButton';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Colors from '../constants/Colors';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { useMessengerContentMutation } from '../hooks/lists/useMessengerContentList';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nexport default function MessageModal({id,  content, isOwner, isTimer}:{id:number, content:string, isOwner:boolean, isTimer:boolean}) {\r\n  const { lang } = useLangContext()\r\n  const { setModal } = useModalsContext()\r\n  const theme = useColorScheme()\r\n  const contentMutation = useMessengerContentMutation()\r\n  const back = ()=>{\r\n    setModal(MessageModal, null)\r\n  }\r\n  useModalEffect(back, [])\r\n  return <BottomSheet>\r\n    <View style={{flexDirection:'row', width:'100%'}}>\r\n      <View style={{flex:1, flexDirection:'row'}}>\r\n        <TouchableOpacity onPress={back}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={{flex:1}}>\r\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('Message')}</Text>\r\n      </View>\r\n      <View style={{flex:1}}/>\r\n    </View>\r\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n      <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} title={lang('copy')} onPress={()=>{Clipboard.setString(content);back()}}/>\r\n      {isOwner && isTimer && <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} textStyle={{color:'red'}} title={lang('delete timer')} onPress={()=>{contentMutation.patch({id, timer:null});back()}}/>}\r\n      {isOwner && <CommonButton style={{height:40, width:'100%', maxWidth:320, justifyContent:'center'}} textStyle={{color:'red'}} title={lang('delete')} onPress={()=>{contentMutation.patch({id, is_archive:true});back()}}/>}\r\n  </BottomSheet>\r\n}\r\n","import React, {useState, useEffect } from 'react';\r\nimport { StyleSheet } from 'react-native';\r\nimport { View, Text } from '../components/Themed';\r\nimport CommonButton from '../components/CommonButton';\r\n// import useBoardChannelList, { useBoardChannelMutation } from '../hooks/lists/useBoardChannelList';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport { navigate } from '../navigation';\r\nimport { Channel } from '../types';\r\nimport useMessengerChannelList, { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\r\nimport TextField from '../components/TextField';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport ModalSection from '../components/ModalSection';\r\nimport { useMessengerMemberMutation } from '../hooks/lists/useMessengerMemberList';\r\nimport { avatarFromChannel } from '../components/Avatar';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nexport default function ChannelEditModal({id, member_id, type}: {id?:number, member_id?:number, type:string}) {\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const channelList = useMessengerChannelList(auth)\r\n  const channelMutation = useMessengerChannelMutation()\r\n  const messengerMemberMutation = useMessengerMemberMutation()\r\n  const channel = channelList?.find(v=>v.id==id)\r\n  const [name, setName] = useState('')\r\n  const [description, setDescription] = useState('')\r\n  const back = ()=>{\r\n    setModal(ChannelEditModal, null)\r\n  }\r\n\r\n  useEffect(()=>{\r\n    if (channel){\r\n      const {name:_name} = avatarFromChannel(channel, auth.user)\r\n      setName(_name)\r\n      setDescription(channel?.description || '')\r\n    }\r\n  }, [channel])\r\n  useModalEffect(back, [])\r\n  return <ModalSection>\r\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\r\n      <View style={{width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{id?lang('Chat Setting'):lang('New chat')}</Text>\r\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n        <TextField name={lang('Channel Name')} value={name} setValue={setName} width={'60%'}/>\r\n        <TextField name={lang('Description')} value={description} setValue={setDescription} multiline width={'60%'}/>\r\n      </View>\r\n      <View style={{width:'100%', flexDirection:'row'}}>\r\n        {member_id &&<View style={{flexDirection:'row', justifyContent:'flex-start'}}>\r\n          <CommonButton title={lang('leave')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>messengerMemberMutation.leave(member_id).then(back)}/>\r\n        </View>}\r\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\r\n          <CommonButton title={lang('save')} onPress={()=>{\r\n            if(auth?.user?.id && auth.groupId){\r\n              const newChannel:Channel = {id, name, description, type, owner:auth?.user?.id, group:auth.groupId};\r\n              (id?channelMutation.update(newChannel):channelMutation.create(newChannel)).then(v=>navigate(\"Main\", {\r\n                screen:v.type == 'messenger'?'ChatScreen':'BoardScreen',\r\n                params:{id:v.id}\r\n              }))\r\n            }\r\n          }}/>\r\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  </ModalSection>\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  field:{\r\n    width:'50%',\r\n    flexDirection:'row',\r\n    padding:10,\r\n  },\r\n  separator: {\r\n    marginBottom: 20,\r\n    height: 1,\r\n    width: '100%',\r\n  },\r\n})","import React, {useState} from \"react\"\r\nimport {View, TouchableOpacity} from 'react-native'\r\nimport { Text } from \"../../../components/Themed\";\r\nimport useUploadContext from \"../../../hooks/useUploadContext\";\r\n\r\nconst UploadTag = (props:{data:{filename:string, progress?:number}, index:number, isExpand:boolean, setExpand:(index?:number)=>void})=>{\r\n    return <View style={{backgroundColor:'lightgray', borderRadius:20, overflow:'hidden', margin:5}}>\r\n        <View style={{backgroundColor:'darkgray', position:'absolute', width:`${(props.data.progress || 0)*100}%`, height:'100%'}}/>\r\n        <View style={{paddingVertical:5, paddingHorizontal:5, flexDirection:'row'}}>\r\n            <Text></Text>\r\n            <View style={{paddingHorizontal:5}}><Text>{props.data.filename}</Text></View>\r\n        </View>\r\n    </View>\r\n}\r\n\r\n\r\nexport default (props:{channel_id:number})=>{\r\n    const { upload } = useUploadContext()\r\n    const [expand, setExpand] = useState<number>()\r\n    return <View style={{flexDirection:'row', paddingTop:5, paddingHorizontal:20}}>\r\n        {upload[props.channel_id]?.map((f,i)=><UploadTag key={i} data={f} index={i} isExpand={i==expand} setExpand={setExpand}/>)}\r\n    </View>\r\n}","import React, {useCallback, useEffect, useLayoutEffect, useMemo, useRef, useState} from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { Platform, StyleSheet, View, TouchableOpacity } from 'react-native';\r\nimport CommonSection from '../../../components/CommonSection';\r\nimport { FlatList, TextInput } from 'react-native-gesture-handler';\r\nimport CommonButton from '../../../components/CommonButton';\r\nimport useMessengerContentList, { MessengerContentPage, useMessengerContentMutation } from '../../../hooks/lists/useMessengerContentList';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport HeaderRight from '../../../components/HeaderRight';\r\nimport useMessengerMemberList from '../../../hooks/lists/useMessengerMemberList';\r\nimport Colors from '../../../constants/Colors';\r\nimport useColorScheme from '../../../hooks/useColorScheme';\r\nimport { Text, View as ThemedView } from '../../../components/Themed' \r\nimport Hyperlink from 'react-native-hyperlink'\r\nimport useMessengerChannelList from '../../../hooks/lists/useMessengerChannelList';\r\nimport useIsMobile from '../../../hooks/useIsMobile';\r\nimport LinkPreview from '../../../components/LinkPreview';\r\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\r\nimport VideoCallSection from './VideoCallSection';\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport FilePreview from '../../../components/FilePreview';\r\nimport useModalsContext from '../../../hooks/useModalsContext';\r\nimport InviteModal from '../../../modals/InviteModal';\r\nimport DateTimePickerModal from '../../../modals/DateTimePickerModal'\r\nimport useLangContext from '../../../hooks/useLangContext';\r\nimport { Entypo } from '../../../lib/@expo/vector-icons';\r\nimport TimerTags, { timerFormat, timerToString } from './TimerTags';\r\nimport MessageModal from '../../../modals/MessageModal';\r\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\r\nimport UploadTags from './UploadTags';\r\n\r\n\r\nfunction uploadFile(){\r\n  return new Promise<Blob|undefined>((resolve, reject)=>{\r\n    if (Platform.OS == 'web'){\r\n      var input = document.createElement('input');\r\n      input.type = 'file';\r\n      input.onchange = e => { \r\n        resolve((e.target as any).files[0])\r\n      }\r\n      input.onabort = reject\r\n      input.onerror = reject\r\n      input.click();\r\n    }\r\n    else\r\n      resolve(undefined)\r\n  })\r\n}\r\n\r\nconst MessengerContentPageItem = React.memo((props:MessengerContentPage & {ownerId?:number})=>{\r\n  const isMobile = useIsMobile()\r\n  const { setModal } = useModalsContext()\r\n  let nextPage = props.next;\r\n    while(nextPage?.next && nextPage.current.length==0){\r\n      nextPage = nextPage.next\r\n    }\r\n    const nextContent = nextPage?.current[0]\r\n    return <View style={{flexDirection: 'column-reverse'}}>\r\n      \r\n      {props.current.map((content, index2)=>{\r\n        const next = index2 + 1 < props.current.length?props.current[index2+1]:nextContent\r\n        const created:string = content.created.slice(0, 16)\r\n        const date = created.slice(0, 10)\r\n        const isSystem = content.user == null\r\n        const isFirst = next==undefined || (content.user != next.user || created != next.created.slice(0, 16))\r\n        const isSelf = props.ownerId == content.user\r\n        const dayChanged = next==undefined || date != next.created.slice(0, 10)\r\n        const message = content.message_set[0]\r\n        const openModal = ()=>setModal(MessageModal, {id:content.id, content:message.content, isOwner:isSelf, isTimer:content.timer?true:false})\r\n        if (isSystem)\r\n          return <View key={content.id} style={{flexDirection:'row', justifyContent:'center', width:'100%', marginVertical:5}}>\r\n            <Text>{message.content}</Text>\r\n          </View>\r\n        return <View key={content.id}>\r\n          {dayChanged?<View style={{flexDirection:'row', justifyContent:'center', width:'100%'}}><Text>{date}</Text></View>:undefined}\r\n          <View key={content.id} style={{flexDirection:'row', justifyContent:isSelf?'space-between':'flex-start', width:'100%'}}>\r\n            {isFirst && !isSelf? <View style={{marginTop:3, marginLeft:12}}><Avatar name={content.name} userId={content.user} size={36}/></View>:<View style={{width:48}}/>}\r\n            <CommonSection autoScale outerContainerStyle={{maxWidth:'90%'}} title={isFirst?content.name:undefined} titleStyle={{flex:undefined}} bodyStyle={{padding:10}} subtitle={`${created.slice(11)}`}>\r\n              <TouchableOpacity onLongPress={openModal}>\r\n                {content.timer && <View style={{flexDirection:'row', alignItems:'stretch'}}>\r\n                  <Text style={{fontSize:12}}></Text>\r\n                  <Text style={{fontSize:12}} selectable={!isMobile}>{timerToString(content.timer)}</Text>\r\n                </View>}\r\n                <View style={{width:\"100%\"}}>\r\n                  {/* @ts-ignore */}\r\n                  <Hyperlink linkDefault={ true } style={{wordBreak:\"break-word\"}} linkStyle={{color: '#12b886'}}>\r\n                    <Text selectable={!isMobile} style={{textAlign:isSelf?'right':'left'}}>{message.content}</Text>\r\n                  </Hyperlink>\r\n                </View>\r\n              {\r\n                content.attatchment_set.map((attatchment, aIndex)=>{\r\n                  if (attatchment.type=='file')\r\n                    return <FilePreview key={aIndex} file={attatchment} isMobile={isMobile} showBorder={false}/>\r\n                  if (attatchment.type=='link')\r\n                    return <LinkPreview key={aIndex} link={attatchment} isMobile={isMobile}/>\r\n                })\r\n              }\r\n              </TouchableOpacity>        \r\n            </CommonSection>\r\n          </View>\r\n        </View>\r\n      })}\r\n    </View>\r\n\r\n})\r\n\r\nexport default function ChatScreen({navigation, route}: StackScreenProps<any, 'Chat'>) {\r\n  const { lang, locale } = useLangContext()\r\n  const isMobile = useIsMobile()\r\n  const channel_id = route?.params?.id\r\n  const height = useRef(0)\r\n  const inputRef = useRef<TextInput>(null)\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const channel = useMessengerChannelList(auth)?.find(v=>v.id==parseInt(channel_id))\r\n  const channelAvatar = channel?avatarFromChannel(channel, auth.user):undefined\r\n  const {data, fetchNextPage } = useMessengerContentList(channel_id)\r\n  const memberList = useMessengerMemberList(channel_id)\r\n  const member_id = useMemo(()=>memberList?.find(v=>v.user == auth.user?.id)?.id, [auth, memberList])\r\n  const windowType = useResizeContext()\r\n  const [value, setValue] = useState('')\r\n  const [timer, setTimer] = useState<string>()\r\n  const [autoFocus, setAutoFocus] = useState<boolean|null>(null)\r\n  const [videoMode, setVideoMode] = useState<boolean>(false)\r\n  const [bottomTab, setBottomTab] = useState<boolean>(false)\r\n  const valueLines = useMemo(()=>bottomTab?1:value.split(\"\\n\").length, [value, bottomTab])\r\n\r\n  const theme = useColorScheme()\r\n  const postValue = ()=>{\r\n    if (value.length>0){\r\n      contentMutation.create({channel:channel_id, user:auth.user?.id, content:value, timer})\r\n      setValue('')\r\n      setTimer(undefined)\r\n      setBottomTab(false)\r\n      setAutoFocus(true)\r\n    }\r\n  }\r\n  const contentMutation = useMessengerContentMutation()\r\n\r\n  useLayoutEffect(() => {\r\n    navigation.setOptions({\r\n      headerRight: ()=> <HeaderRight extra={[\r\n        {title:lang('invite'), onPress:()=>setModal(InviteModal, {id:channel_id})},\r\n        {title:lang('setting'), onPress:()=>setModal(ChannelEditModal, {id:channel_id, type:'messenger', member_id})}\r\n      ]}/>,\r\n      title: channelAvatar?.name\r\n    });\r\n  }, [navigation, route, member_id, locale]);\r\n\r\n  const renderItem = useCallback(({item, index}:{item:MessengerContentPage, index:number})=><MessengerContentPageItem {...item} ownerId={auth.user?.id}/>, [auth])\r\n  \r\n  const back = ()=>{\r\n    if(navigation.canGoBack())\r\n        navigation.goBack()\r\n      else{\r\n        navigation.navigate('HomeScreen', {tab:2})\r\n      }\r\n  }\r\n  const onKeyPress = (e:any) => {\r\n    if (!isMobile){\r\n      const event = e as KeyboardEvent;\r\n        if (!event.shiftKey && event.key === \"Enter\"){\r\n          postValue()\r\n          event.preventDefault()\r\n      }\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    setModal(null, null)\r\n    if (!channel_id)\r\n      back()\r\n  }, [route])\r\n  useEffect(()=>{\r\n    if (memberList===null || (memberList!=undefined && memberList.find(v=>v.user==auth.user?.id)==undefined))\r\n      back()\r\n  }, [memberList])\r\n  useEffect(()=>{\r\n    if(autoFocus){\r\n      (inputRef.current as any).focus()\r\n      setAutoFocus(false)\r\n    }\r\n  }, [autoFocus])\r\n  useEffect(()=>{\r\n    if (autoFocus==null && !isMobile){\r\n      const timeout = setTimeout(()=>setAutoFocus(true), 500)\r\n      return ()=>clearTimeout(timeout)\r\n    }\r\n  })\r\n  return <View style={[\r\n    {flex:1, alignItems:'center'},\r\n    windowType=='landscape'?{flexDirection:'row-reverse', minWidth:480}:{flexDirection:'column'}\r\n  ]}>\r\n    <VideoCallSection channel_id={channel_id} setDisable={(d)=>setVideoMode(!d)} disable={!videoMode}/>\r\n    <View style={[videoMode?{flexShrink:1}:{flex:1}, windowType=='landscape'?{minWidth:320, height:'100%'}:{width:'100%'}]}>\r\n      <FlatList\r\n        style={{flexDirection: 'column-reverse'}}\r\n        contentContainerStyle={{padding:10, flexGrow:1, flexDirection: 'column-reverse'}}\r\n        data={data?.pages}\r\n        renderItem={renderItem}\r\n        onScroll={(e)=>{\r\n          if (e.nativeEvent.contentOffset.y + e.nativeEvent.contentSize.height - height.current < 1)\r\n            fetchNextPage()\r\n        }}\r\n        onLayout={(p)=>{height.current = p.nativeEvent.layout.height}}\r\n      />\r\n      <View style={{position:'absolute', flexDirection:'row'}}>\r\n        <UploadTags channel_id={channel_id}/>\r\n        <TimerTags channel_id={channel_id}/>\r\n      </View>\r\n      <ThemedView style={{bottom:0, width:'100%', paddingTop:15, paddingBottom:10, paddingHorizontal:19}}>\r\n        <View style={{alignItems:'center', width:'100%',flexDirection:'row'}}>\r\n          <CommonButton title={''} style={{height:'100%', paddingTop:8, borderTopRightRadius:0, borderBottomRightRadius:0, justifyContent:'center'}} onPress={()=>setBottomTab(!bottomTab)}>\r\n            <View style={{top:-2}}>\r\n              <Entypo name={bottomTab?\"cross\":\"plus\"} size={24} color={Colors[theme].text}/>\r\n            </View>\r\n          </CommonButton>\r\n          {timer && <CommonButton style={{height:'100%', paddingTop:8, borderRadius:0}} title={`${timerFormat(timer)}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>}\r\n          <TextInput \r\n            ref={inputRef} \r\n            value={value} \r\n            onChangeText={setValue}\r\n            onKeyPress={onKeyPress}\r\n            style={{flex:1, borderWidth:1, minHeight:40, borderColor:Colors.borderColor, backgroundColor:Colors[theme].background, color:Colors[theme].text}}\r\n            onFocus={()=>setBottomTab(false)}\r\n            multiline \r\n            numberOfLines={valueLines}/>\r\n          <CommonButton style={{height:'100%', paddingTop:8, borderTopLeftRadius:0, borderBottomLeftRadius:0, justifyContent:'center'}} title={''} onPress={postValue}/>\r\n        </View>\r\n\r\n        {bottomTab && <View style={{alignItems:'center', width:'100%', flexDirection:'row', paddingTop:15, paddingBottom:5}}>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`\\n ${lang('File')}`} onPress={()=>uploadFile().then(f=>{contentMutation.create({channel:channel_id, user:auth.user?.id, content:'', file:f});setBottomTab(false)})}/>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center', marginRight:15}} title={`\\n ${lang('Timer')}`} onPress={()=>{setModal(DateTimePickerModal, {datetime:timer, callback:(datetime:string)=>setTimer(datetime)});setBottomTab(false)}}/>\r\n          <CommonButton style={{height:80, flex:1, justifyContent:'center'}} title={`\\n ${lang('Video Call')}`} onPress={()=>{setVideoMode(!videoMode);setBottomTab(false)}} disabled={videoMode}/>\r\n        </View>}\r\n      </ThemedView>\r\n    </View>\r\n  </View>\r\n}","import React from 'react';\r\nimport {View} from 'react-native'\r\nimport {Text} from './Themed';\r\nimport { ProfileProps } from '../types';\r\nimport Avatar from './Avatar';\r\n\r\nexport default (props:ProfileProps)=>{\r\n    return <View style={{width:'100%', height:135, justifyContent:'space-evenly', alignItems:'center'}}>\r\n        <Avatar {...props} size={75}/>\r\n        <Text style={{fontWeight:'bold', fontSize:15}}>{props.name}</Text>\r\n        <Text style={{fontWeight:'normal', fontSize:14}}>{props.username}</Text>\r\n    </View>\r\n}","import React, { useEffect } from 'react';\r\nimport Profile from '../components/Profile';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport { useMessengerChannelMutation } from '../hooks/lists/useMessengerChannelList';\r\nimport CommonButton from '../components/CommonButton';\r\nimport { Channel } from '../types';\r\nimport { navigate } from '../navigation';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport { Text, View } from '../components/Themed';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport Colors from '../constants/Colors';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { BottomSheet } from '../components/ModalSection';\r\nimport useModalEffect from '../hooks/useModalEffect';\r\n\r\nexport default function ProfileModal({id}:{id:number}) {\r\n  const { lang } = useLangContext()\r\n  const theme = useColorScheme()\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const user = userList?.find(v=>v.id==id)\r\n  const isSelf = auth.user && user && (auth.user?.id==user?.id)\r\n  const channelMutation = useMessengerChannelMutation()\r\n  const back = ()=>{\r\n    setModal(ProfileModal, null)\r\n  }\r\n  useEffect(()=>{\r\n    if (!(id && user) && userList)\r\n      back()\r\n  }, [userList])\r\n  useModalEffect(back, [])\r\n  return user?<BottomSheet>\r\n    <View style={{flexDirection:'row', width:'100%'}}>\r\n      <View style={{flex:1, flexDirection:'row'}}>\r\n        <TouchableOpacity onPress={back}>\r\n          <Ionicons size={20} name=\"arrow-back\" color={Colors[theme].text}/>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <View style={{flex:1}}>\r\n        <Text style={{fontSize:20, textAlign:'center'}}>{lang('profile')}</Text>\r\n      </View>\r\n      <View style={{flex:1}}/>\r\n    </View>\r\n    <View style={{marginBottom: 20, height: 1, width: '100%'}} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n    \r\n    <Profile username={user.username} name={user.name} userId={user.id} />\r\n    <CommonButton title={lang(isSelf?'Chat with me':'1:1 Chat')} onPress={()=>{\r\n      if(auth?.user?.id && auth.groupId){\r\n        const newChannel:Channel = {name:\"\", type:'messenger', owner:auth?.user?.id, group:auth.groupId, subowner:isSelf?undefined:user.id};\r\n        channelMutation.direct(newChannel).then(v=>navigate(\"Main\", {screen:\"ChatScreen\", params: {id:v.id}}))\r\n      }\r\n    }}/>\r\n  </BottomSheet>:<></>\r\n}\r\n","import React, { useState,  useEffect, createContext, useMemo, useRef, useContext } from \"react\"\r\nimport firebase from \"firebase/app\";\r\nimport \"firebase/messaging\";\r\nimport {FCM_PUBLIC_VAPID_KEY, FCM_API_KEY} from \"../constants/Envs\"\r\nimport { Notification as NotificationType, UserMembership } from \"../types\";\r\nimport { getNotification, postNotification, putNotification } from \"../services/notification\";\r\n\r\nconst firebaseConfig = require(\"../../web/firebase-config.js\")\r\n// Initialize Firebase\r\nconst key = firebaseConfig.messagingSenderId\r\nconst apiKeyEncrypted = (FCM_API_KEY as string).split('').map((v, i)=> (v.charCodeAt(0) ^ key.charCodeAt(i)).toString(16).padStart(2, '0')).join('')\r\nconst app = firebase.initializeApp({...firebaseConfig, apiKey:FCM_API_KEY});\r\n// const analytics = getAnalytics(app);\r\nconst messaging = firebase.messaging(app);\r\n\r\nmessaging.onMessage((payload) => {\r\n  if (!(\"Notification\" in window)) {\r\n    alert(\"This browser does not support desktop notification\");\r\n  }\r\n  else if (Notification.permission === \"granted\") {\r\n    const message_set = JSON.parse(payload.data['message_set'])[0]\r\n    new Notification(payload.data.channel_name, { body: `${payload.data.name}: ${message_set.content}` });\r\n  }\r\n});\r\n\r\nconst requestToken = async()=>{\r\n  const permission = await Notification.requestPermission();\r\n  if (permission === 'granted') {\r\n    const serviceWorkerRegistration = await navigator.serviceWorker.register(`${process.env.PUBLIC_URL}/firebase-messaging-sw.js?${apiKeyEncrypted}`)\r\n    console.log('[SW]: SCOPE: ', serviceWorkerRegistration.scope);\r\n    const currentToken = await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY }).catch(\r\n      async()=>await messaging.getToken({serviceWorkerRegistration, vapidKey: FCM_PUBLIC_VAPID_KEY })\r\n    )\r\n    window.addEventListener('beforeunload', (event:any) => {\r\n      event.preventDefault();\r\n      serviceWorkerRegistration.unregister()\r\n    });\r\n    if (currentToken)\r\n      return currentToken\r\n  }\r\n  return null\r\n}\r\n\r\nconst FirebaseContext = createContext<{enable?:boolean, setEnable:(enable:boolean)=>void}>({setEnable:()=>{}});\r\n\r\nexport const FirebaseProvider = ({user, children}:{user?:UserMembership|null, children:React.ReactNode})=>{\r\n  const tokenRef = useRef<string|null>()\r\n  const [notification, setNotification] = useState<NotificationType|null>()\r\n  const enable = useMemo(()=>notification===undefined?undefined:(notification?.token?true:false), [notification])\r\n  const setEnable = (enable:boolean)=>{\r\n    if(user && notification){\r\n      putNotification({...notification, token:enable?(tokenRef.current==undefined?null:tokenRef.current):null}).then((noti)=>{\r\n        setNotification(noti)\r\n      })\r\n    }\r\n  }\r\n  useEffect(()=>{\r\n    let isMount = true;\r\n    if(user){\r\n      if (tokenRef.current ===undefined){\r\n        tokenRef.current = null\r\n        requestToken().then((t)=>{\r\n          tokenRef.current = t\r\n          if (notification){\r\n            putNotification({...notification, token:tokenRef.current}).then((noti)=>{\r\n              if(isMount)setNotification(noti)\r\n            })\r\n          }\r\n        });\r\n      }\r\n      if (notification===undefined){\r\n        getNotification(user.id).then((noti)=>{\r\n          if(isMount)setNotification(noti || null)\r\n        })\r\n      }\r\n      else if(notification===null){\r\n        postNotification({user:user.id, type:'WEB', token:null}).then((noti)=>{\r\n          if(isMount)setNotification(noti)\r\n        })\r\n      }\r\n      else if (notification.token && tokenRef.current && tokenRef.current != notification.token){\r\n        putNotification({...notification, token:tokenRef.current}).then((noti)=>{\r\n          if(isMount)setNotification(noti)\r\n        })\r\n      }\r\n    }\r\n    return ()=>{isMount=false}\r\n  }, [user, notification])\r\n  return <FirebaseContext.Provider value={{enable, setEnable}}>\r\n    {(enable!=undefined || user===null) && children}\r\n  </FirebaseContext.Provider>\r\n}\r\n\r\nexport default ()=>{\r\n  const {enable, setEnable} = useContext(FirebaseContext)\r\n  return {enable, setEnable}\r\n}\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { StyleSheet, TextInput } from \"react-native\";\r\nimport useLangContext from \"../hooks/useLangContext\";\r\nimport useUserMembershipList, { useUserMembershipMutation } from \"../hooks/lists/useUserMembershipList\";\r\nimport useAuthContext from \"../hooks/useAuthContext\";\r\nimport ModalSection from \"../components/ModalSection\";\r\nimport useModalsContext from \"../hooks/useModalsContext\";\r\nimport { View, Text } from \"../components/Themed\";\r\nimport RowField from \"../components/RowField\";\r\nimport CommonButton from \"../components/CommonButton\";\r\nimport CommonTextInput from \"../components/CommonTextInput\";\r\n// import TextButton from \"../components/TextButton\";\r\n// import Colors from \"../constants/Colors\";\r\n// import useColorScheme from \"../hooks/useColorScheme\";\r\n\r\ntype ErrorMessages = {\r\n    username?:string,\r\n    name?:string,\r\n    password?:string,\r\n    checkPassword?:string\r\n}\r\n\r\nconst ErrorView = (props:{message?:string})=>{\r\n  const { lang } = useLangContext()\r\n  return props.message?<View style={styles.form_error}>\r\n  <Text style={styles.form_error_text}>{lang(props.message)}</Text>\r\n</View>:<></>\r\n}\r\n\r\nexport default function RegistrationModal({id}:{id?:number}) {\r\n  const { lang } = useLangContext()\r\n  const {auth} = useAuthContext()\r\n  // const theme = useColorScheme()\r\n  // const color = Colors[theme].text\r\n  const { setModal } = useModalsContext()\r\n  const [username, setUsername] = useState(\"\");\r\n  const [name, setName] = useState(\"\")\r\n  const [password, setPassword] = useState(\"\");\r\n  const [checkPassword, setCheckPassword] = useState(\"\")\r\n  const [isStaff, setIsStaff] = useState(false)\r\n  const [error, setError] = useState<ErrorMessages>({})\r\n  const userList = useUserMembershipList(auth)\r\n  const userMembershipMutation = useUserMembershipMutation()\r\n  const user = userList?.find(v=>v.id==id)\r\n  useEffect(()=>{\r\n    if (user){\r\n      setUsername(user.username)\r\n      setName(user.name)\r\n    }\r\n  }, [user])\r\n  const _register = ()=>{\r\n    let newError:ErrorMessages = {};\r\n    if (userList?.find(v=>v.username == username) && !id) newError.username = \"The username is already in use.\"\r\n    if (username.length < 10 || username.length > 64) newError.username = \"Set 10-64 characters.\"\r\n    if (name.length < 1 || name.length > 64) newError.name = \"Set 1-64 characters.\"\r\n    if (!/^(?=.*[A-Za-z])(?=.*\\d)(?=.*[@$!%*#?&])[A-Za-z\\d@$!%*#?&]{10,64}$/.test(password) && !(id && password.length==0)) newError.password = \"Set 10-64 characters with a combination of letters/numbers/valid special characters.\"\r\n    if (password != checkPassword) newError.checkPassword = \"Incorrect between password and check password.\"\r\n    if (Object.keys(newError).length > 0){\r\n        setError(newError)\r\n        return\r\n    }\r\n    if (id){\r\n      userMembershipMutation.update({\r\n        id,\r\n        name,\r\n        password:password.length>0?password:undefined,\r\n      }).then(()=>{id!=auth.user?.id && back()})\r\n    }\r\n    else{\r\n      auth?.groupId && userMembershipMutation.create({\r\n          username,\r\n          name,\r\n          password,\r\n          is_guest:false,\r\n          is_staff:isStaff,\r\n          inviteGroupId:auth.groupId,\r\n\r\n      }).then(back)\r\n    }\r\n  }\r\n  const back = ()=>{\r\n    setModal(RegistrationModal, null)\r\n  }\r\n\r\n  return <ModalSection>\r\n    <View style={{justifyContent:'space-between', flex:1, width:'100%'}}>\r\n      <View style={{flex:1, width:'100%'}}>\r\n        <Text style={{fontSize:20}}>{lang('Create User')}</Text>\r\n        <View style={styles.separator} lightColor=\"#ddd\" darkColor=\"rgba(255,255,255, 0.3)\" />\r\n        <RowField name={lang('Username')} width={'60%'}>\r\n          {id?<Text style={{fontSize:16}}>{username}</Text>:<CommonTextInput\r\n              value={username}\r\n              setValue={(text) => setUsername(text)}\r\n              keyboardType={'email-address'}\r\n          />}\r\n          <ErrorView message={error.username}/>\r\n        </RowField>\r\n        <RowField name={lang('Name')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={name}\r\n              setValue={(text) => setName(text)}\r\n          />\r\n          <ErrorView message={error.name}/>\r\n        </RowField>\r\n        <RowField name={lang('Password')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={password}\r\n              secureTextEntry\r\n              setValue={(text) => setPassword(text)}\r\n          />\r\n          <ErrorView message={error.password}/>\r\n        </RowField>\r\n        <RowField name={lang('Check Password')} width={'60%'}>\r\n          <CommonTextInput\r\n              value={checkPassword}\r\n              secureTextEntry\r\n              setValue={(text) => setCheckPassword(text)}\r\n          />\r\n          <ErrorView message={error.checkPassword}/>\r\n        </RowField>\r\n        {/* <RowField name={lang('Manager Permission')} width={'60%'}>\r\n          <View style={{flexDirection:'row'}}>\r\n            {[[lang('Yes'), true], [lang('No'), false]].map(([title, value])=><TextButton \r\n              key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:isStaff==value?'underline':'none'}} style={{borderRadius:20}} onPress={(\r\n              )=>setIsStaff(value)}/>)}\r\n          </View>\r\n        </RowField> */}\r\n      </View>\r\n      <View style={{width:'100%', flexDirection:'row'}}>\r\n        {id && <View style={{flexDirection:'row', justifyContent:'flex-start'}}>\r\n          <CommonButton title={lang('delete account')} style={{marginHorizontal:5}} textStyle={{color:'red'}} onPress={()=>userMembershipMutation.delete(id).then(back)}/>\r\n        </View>}\r\n        <View style={{flex:1, flexDirection:'row', justifyContent:'flex-end'}}>\r\n          <CommonButton title={lang('save')} onPress={_register}/>\r\n          <CommonButton title={lang('cancel')} style={{marginHorizontal:5}} onPress={back}/>\r\n        </View>\r\n      </View>\r\n    </View>\r\n  </ModalSection>\r\n};\r\n\r\nconst styles = StyleSheet.create({\r\n  form_error: {\r\n    height: 22,\r\n    width:'100%',\r\n  },\r\n  form_error_text:{\r\n    textAlignVertical:'center',\r\n    color:'red',\r\n    fontSize:13,\r\n  },\r\n  separator: {\r\n    marginBottom: 20,\r\n    height: 1,\r\n    width: '100%',\r\n  },\r\n});","import React from \"react\"\r\nimport CommonSection from \"../../../components/CommonSection\"\r\nimport Colors from \"../../../constants/Colors\"\r\nimport useColorScheme, { setColorScheme } from \"../../../hooks/useColorScheme\"\r\nimport { StyleSheet, Text, View} from 'react-native';\r\nimport useLangContext from \"../../../hooks/useLangContext\";\r\nimport { useColorScheme as useConfigColorScheme} from 'react-native-appearance';\r\nimport useFirebaseContext from \"../../../hooks/useFirebaseContext\";\r\nimport TextButton from \"../../../components/TextButton\";\r\nimport useModalsContext from \"../../../hooks/useModalsContext\";\r\nimport RegistrationModal from \"../../../modals/RegistrationModal\";\r\nimport useAuthContext from \"../../../hooks/useAuthContext\";\r\n\r\n\r\nconst ConfigSection = ({title, children}:{title:string, children?: React.ReactNode})=>{\r\n  const theme = useColorScheme()\r\n  const color = Colors[theme].text\r\n  return <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n    <Text style={{fontSize:20, color, fontWeight:'600'}}>{title}</Text>\r\n    {children}\r\n  </CommonSection>\r\n}\r\n\r\nexport default ()=>{\r\n  const { lang, locale, setLocale } = useLangContext()\r\n  const { setModal } = useModalsContext()\r\n  const {auth} = useAuthContext()\r\n  const theme = useColorScheme()\r\n  const configTheme = useConfigColorScheme()\r\n  const {enable:noti, setEnable:setNoti} = useFirebaseContext()\r\n  const color = Colors[theme].text\r\n  return <>\r\n    <ConfigSection title={lang('* Notification Settings')}>\r\n      <View style={{flexDirection:'row'}}>\r\n        {[[lang('On'), true], [lang('Off'), false]].map(([title, n])=><TextButton\r\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:noti==n?'underline':'none'}} style={{borderRadius:20}} onPress={()=>{setNoti(n)}}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    <ConfigSection title={lang('* Language Settings')}>\r\n    <View style={{flexDirection:'row'}}>\r\n        {[[lang('Auto'), 'auto'], ['', 'ko'], ['English', 'en']].map(([title, l])=><TextButton \r\n          key={title} title={title || ''} textStyle={{fontSize:16, color, textDecorationLine:locale==l?'underline':'none'}} style={{borderRadius:20}} onPress={()=>setLocale(l)}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    <ConfigSection title={lang('* Skin Settings')}>\r\n      <View style={{flexDirection:'row'}}>\r\n        {[[lang('Auto'), 'no-preference'], [lang('Light'), 'light'], [lang('Dark'), 'dark']].map(([title, colorScheme])=><TextButton \r\n          key={title} title={title} textStyle={{fontSize:16, color, textDecorationLine:configTheme==colorScheme?'underline':'none'}} style={{borderRadius:20}} onPress={(\r\n            )=>setColorScheme(colorScheme)}/>)}\r\n      </View>\r\n    </ConfigSection>\r\n    {!auth.user?.is_guest && <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n      <TextButton title={lang('> Account Settings')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(RegistrationModal, {id:auth.user?.id})}/>\r\n    </CommonSection>}\r\n  </>\r\n}","import React, {useState, useEffect, useLayoutEffect, useMemo} from 'react';\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport { StyleSheet, View, ScrollView} from 'react-native';\r\nimport { Text as StyledText } from 'react-native-paper';\r\nimport { Text } from '../../../components/Themed'\r\nimport useResizeContext from '../../../hooks/useResizeContext';\r\nimport TabView from '../../../components/TabView';\r\nimport HeaderRight from '../../../components/HeaderRight';\r\nimport TextButton from '../../../components/TextButton';\r\nimport Colors from '../../../constants/Colors';\r\nimport useColorScheme  from '../../../hooks/useColorScheme';\r\nimport useModalsContext from '../../../hooks/useModalsContext';\r\nimport ChannelEditModal from '../../../modals/ChannelEditModal';\r\nimport useLangContext from '../../../hooks/useLangContext';\r\nimport ContractFooter from '../../../components/ContractFooter';\r\nimport { TabViewRecord } from '../../../types';\r\nimport useAuthContext from '../../../hooks/useAuthContext';\r\nimport useUserMembershipList from '../../../hooks/lists/useUserMembershipList';\r\nimport { FontAwesome, Ionicons, MaterialCommunityIcons, SimpleLineIcons } from '../../../lib/@expo/vector-icons';\r\nimport { useMessengerChannelSorted } from '../../../hooks/lists/useMessengerChannelList';\r\nimport CommonItem from '../../../components/CommonItem';\r\nimport MemberItem from '../../../components/MemberItem';\r\nimport ProfileModal from '../../../modals/ProfileModal';\r\nimport { navigate } from '../../../navigation';\r\nimport CommonSection from '../../../components/CommonSection';\r\nimport ConfigSections from './ConfigSections';\r\nimport Avatar, { avatarFromChannel } from '../../../components/Avatar';\r\nimport RegistrationModal from '../../../modals/RegistrationModal';\r\n\r\nconst MemberTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const theme = useColorScheme()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  const memberItem = React.useMemo(\r\n      ()=>userList && userList.map((item, index)=><MemberItem key={index} member={item} onPress={()=>setModal(ProfileModal, {id:item.id})}/>), [userList])\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      {memberItem}\r\n  </ScrollView>\r\n}\r\n\r\nconst MessengerTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const channelList = useMessengerChannelSorted(auth)\r\n  const theme = useColorScheme()\r\n\r\n  const today = (new Date()).toISOString().slice(0, 10)\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n      {channelList?.map((item, index)=>{\r\n          const {avatar, name} = avatarFromChannel(item, auth.user)\r\n          const date = item.last_message?.created.slice(0,10)\r\n          const content = item.last_message?.preview_content || item.last_message?.content || ''\r\n          return <CommonItem key={index} bodyStyle={{flexDirection:'row', justifyContent:'space-between'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\r\n              <View style={{flexDirection:'row', flexShrink:1}}>\r\n                  {avatar?\r\n                    <View style={{ marginRight:20}}>\r\n                      <Avatar name={avatar.name} size={44} userId={avatar.id}/>\r\n                    </View>:\r\n                    <FontAwesome size={40} color={Colors[theme].iconColor} style={{ marginBottom: -3, marginRight:20 }} name='users'/>}\r\n                  <View>\r\n                      <View style={{flexDirection:'row'}}>\r\n                          <Text style={{fontSize:18}}>{name}</Text>\r\n                          <Text style={{fontSize:18, opacity: 0.4, paddingLeft:5}}>{item.member_count}</Text>\r\n                      </View>\r\n                      <Text style={{fontSize:16, opacity: 0.4}}>{content.replaceAll('\\n', ' ')}</Text>\r\n                  </View>\r\n              </View>\r\n              <View>\r\n                  <Text style={{fontSize:14, opacity: 0.4, textAlign:'right'}}>{date==today?item.last_message?.created.slice(11,16):date}</Text>\r\n                  <Text style={{fontSize:14, textAlign:'right'}}>{item.unread_count?item.unread_count:' '}</Text>\r\n              </View>\r\n          </CommonItem>\r\n      })}\r\n  </ScrollView>\r\n}\r\n\r\n\r\nconst ConfigTabView = ()=>{\r\n  const theme = useColorScheme()\r\n  return <ScrollView style={{flex:1, backgroundColor:Colors[theme].background}}>\r\n    <ConfigSections/>\r\n  </ScrollView>\r\n}\r\n\r\nconst getBottomTabs = (theme:'light'|'dark')=>{\r\n  const color = Colors[theme].iconColor\r\n  return {\r\n    OneTab:{\r\n        title:'member',\r\n        component:MemberTabView,\r\n        icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\r\n    },\r\n    TwoTab:{\r\n        title:'chat',\r\n        component:MessengerTabView,\r\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\r\n    },\r\n    // ThreeTab:{\r\n    //     title:'board',\r\n    //     component:()=><></>,\r\n    //     icon:<></>\r\n    // },\r\n    FourTab:{\r\n        title:'config',\r\n        component:ConfigTabView,\r\n        icon:<SimpleLineIcons size={30} color={color} style={{ marginBottom: -3 }} name='options'/>\r\n    }\r\n  } as TabViewRecord\r\n}\r\n\r\n\r\nexport default function HomeScreen({navigation, route}: StackScreenProps<any, 'Home'>) {\r\n  const { lang, locale } = useLangContext()\r\n  const windowType = useResizeContext();\r\n  const theme = useColorScheme()\r\n  const { setModal } = useModalsContext()\r\n  const [ home, setHome ] = useState(windowType == 'landscape')\r\n  const color = Colors[theme].text\r\n  const options = [\r\n    {title:lang('member'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(RegistrationModal, {})}]}/>},\r\n    {title:lang('chat'), headerRight:()=><HeaderRight extra={[{title:lang('create'), onPress:()=>setModal(ChannelEditModal, {type:'messenger'})}]}/>},\r\n    // {title:'board', headerRight:()=><HeaderRight extra={[{title:'create', onPress:()=>setModal(ChannelEditModal, props:{type:'board'}}) }]}/>},\r\n    {title:lang('config'), headerRight:()=><HeaderRight/>}\r\n  ]\r\n  \r\n  useLayoutEffect(() => {\r\n    const index = route?.params?.tab | 0\r\n    navigation.setOptions(windowType == 'portrait'?options[index]:{\r\n      title: lang('home'),\r\n      headerRight: ()=><HeaderRight/>\r\n    });\r\n  }, [navigation, route, windowType, locale]);\r\n  useEffect(()=>{\r\n    setHome(windowType == 'landscape')\r\n  }, [windowType])\r\n  return home?\r\n    <ScrollView contentContainerStyle={{flex:1, alignItems:'center'}}>\r\n      <View style={{flexGrow:1, width:'80%', marginTop:72}}>\r\n        <StyledText style={{fontSize:32, color}}>Tokki Tok</StyledText>\r\n        <View style={{backgroundColor:Colors.borderColor, height:1, width:'100%'}}/>\r\n        {/* <Text style={{fontSize:20, color:'gray'}}>Welcome! This is a messenger for teams.</Text>*/}\r\n        <View style={{height:24}}/>\r\n        <CommonSection bodyStyle={{alignItems:'flex-start', backgroundColor:theme=='light'?'transparent':\"black\"}}>\r\n          <TextButton title={lang('+ New chat')} textStyle={{fontSize:20, color}} style={{paddingLeft:0, borderRadius:20}} onPress={()=>setModal(ChannelEditModal, {type:'messenger'})}/>\r\n        </CommonSection>\r\n        <ConfigSections/>\r\n      </View>\r\n      <ContractFooter theme={theme}/>\r\n    </ScrollView>:\r\n    <TabView tabs={getBottomTabs(theme)} tabBarPosition=\"bottom\" index={parseInt(route.params?.['tab'] || 0)} onTab={(index)=>{navigation.setParams({tab:index})}}/>\r\n}\r\n\r\n","import LoginScreen from \"./main/LoginScreen\";\r\nimport ChatScreen from \"./main/ChatScreen\";\r\nimport HomeScreen from \"./main/HomeScreen\";\r\n// import BoardScreen from \"../lib/blacktokki-board/BoardScreen\";\r\n// import BoardEditScreen from \"../lib/blacktokki-board/BoardEditScreen\";\r\nimport { Screens } from \"../types\";\r\nimport DemoScreen from \"./main/DemoScreen\";\r\n\r\nexport const main = {\r\n    HomeScreen:{\r\n        title:'home',\r\n        component:HomeScreen,\r\n        path:'home',\r\n    },\r\n    ChatScreen:{\r\n        title:'chat',\r\n        component:ChatScreen,\r\n        path:'chat'\r\n    },\r\n    // BoardScreen:{\r\n    //     title:'board',\r\n    //     component:BoardScreen,\r\n    //     path:'board'\r\n    // },\r\n} as Screens\r\n\r\nexport const login = {\r\n    LoginScreen:{\r\n        path: 'login',\r\n        title: 'Sign in',\r\n        component:LoginScreen\r\n    },\r\n    DemoScreen:{\r\n        title:'',\r\n        component:DemoScreen,\r\n        path:'demo'\r\n    }\r\n} as Screens\r\n\r\nexport const modal = {\r\n    // BoardEditScreen:{\r\n    //     title:'board',\r\n    //     component:BoardEditScreen,\r\n    //     path:'modal/board'\r\n    // },\r\n} as Screens","import React, { useLayoutEffect } from 'react';\r\n\r\nimport { StackScreenProps } from '@react-navigation/stack';\r\nimport useAuthContext from '../../hooks/useAuthContext';\r\n\r\nexport default function DemoScreen({navigation}: StackScreenProps<any, 'Demo'>) {\r\n    const {dispatch} = useAuthContext()\r\n    useLayoutEffect(() => {\r\n        navigation.setOptions({headerRight: undefined});\r\n        dispatch({type:\"LOGIN_GUEST\"})\r\n    }, []);\r\n  return <></>\r\n};","/**\r\n * Learn more about deep linking with React Navigation\r\n * https://reactnavigation.org/docs/deep-linking\r\n * https://reactnavigation.org/docs/configuring-links\r\n */\r\n\r\nimport { LinkingOptions } from '@react-navigation/native';\r\nimport * as Linking from 'expo-linking';\r\nimport {main, login, modal} from '../screens';\r\n\r\nconst ROOTPATH = 'tokki-tok'  // github repository name\r\n\r\nObject.values(modal).forEach(v=>v.path = ROOTPATH + '/' + v.path)\r\n\r\nexport default  {\r\n  prefixes: [Linking.makeUrl('/')],\r\n  config: {\r\n    screens: {\r\n      Main: {\r\n        screens:{\r\n          ...main,\r\n          ...login,\r\n          NotFound: '*',\r\n        },\r\n        path: ROOTPATH\r\n      },\r\n      ...modal\r\n    },\r\n  },\r\n} as LinkingOptions;\r\n","import { StackScreenProps } from '@react-navigation/stack';\r\nimport * as React from 'react';\r\nimport { StyleSheet, Text, TouchableOpacity, View } from 'react-native';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport useLangContext from '../hooks/useLangContext';\r\n\r\nexport default function NotFoundScreen({\r\n  navigation,\r\n}: StackScreenProps<any, 'NotFound'>) {\r\n  const { lang } = useLangContext()\r\n  const { auth } = useAuthContext()\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.title}>{lang(\"This screen doesn't exist.\")}</Text>\r\n      <TouchableOpacity onPress={() => navigation.replace(auth.user?'HomeScreen':'LoginScreen')} style={styles.link}>\r\n        <Text style={styles.linkText}>{lang(\"Go to home screen!\")}</Text>\r\n      </TouchableOpacity>\r\n    </View>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 20,\r\n  },\r\n  title: {\r\n    fontSize: 20,\r\n    fontWeight: 'bold',\r\n  },\r\n  link: {\r\n    marginTop: 15,\r\n    paddingVertical: 15,\r\n  },\r\n  linkText: {\r\n    fontSize: 14,\r\n    color: '#2e78b7',\r\n  },\r\n});\r\n","import { useTheme } from '@react-navigation/native';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { View, StyleSheet } from 'react-native';\r\nimport Profile from '../components/Profile';\r\nimport TextButton from '../components/TextButton';\r\nimport Colors from '../constants/Colors';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\nimport TabView from '../components/TabView';\r\nimport { TabViewRecord, UserMembership } from '../types';\r\nimport useModalsContext from '../hooks/useModalsContext';\r\nimport ChannelEditModal from '../modals/ChannelEditModal';\r\nimport CommonItem from '../components/CommonItem';\r\nimport { Text } from '../components/Themed';\r\nimport useAuthContext, { Auth } from '../hooks/useAuthContext';\r\nimport { useMessengerChannelSorted } from '../hooks/lists/useMessengerChannelList';\r\nimport { navigate } from '.'\r\nimport { avatarFromChannel } from '../components/Avatar';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { Ionicons, MaterialCommunityIcons } from '../lib/@expo/vector-icons';\r\nimport RegistrationModal from '../modals/RegistrationModal';\r\nimport useUserMembershipList from '../hooks/lists/useUserMembershipList';\r\nimport ProfileModal from '../modals/ProfileModal';\r\n\r\n\r\nconst MemberTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const { setModal } = useModalsContext()\r\n  const userList = useUserMembershipList(auth)\r\n  return <View style={{flex:1}}>\r\n    {userList?.map((item, index)=>{\r\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>setModal(ProfileModal, {id:item.id})}>\r\n        <Text style={{marginLeft:20}}>{item.name}</Text>\r\n      </CommonItem>\r\n    })}\r\n  </View>\r\n}\r\n\r\nconst MessengerTabView = ()=>{\r\n  const {auth} = useAuthContext()\r\n  const channelList = useMessengerChannelSorted(auth);\r\n  return <View style={{flex:1}}>\r\n    {channelList?.map((item, index)=>{\r\n      const {name} = avatarFromChannel(item, auth.user)\r\n      return <CommonItem key={index} containerStyle={{marginHorizontal:0}} bodyStyle={{alignItems:'flex-start'}} onPress={()=>navigate(\"ChatScreen\", {id:item.id})}>\r\n        <Text style={{marginLeft:20}}>{name}</Text>\r\n      </CommonItem>\r\n    })}\r\n  </View>\r\n}\r\nconst getDrawerTabs = (theme:'light'|'dark')=>{\r\n  const color = Colors[theme].iconColor\r\n  return {\r\n    MemberTab:{\r\n      title:'member',\r\n      component:MemberTabView,\r\n      icon:<MaterialCommunityIcons size={32} color={color} style={{ marginBottom: -3 }} name='account'/>,\r\n    },\r\n    ChatTab:{\r\n        title:'chat',\r\n        component:MessengerTabView,\r\n        icon:<Ionicons size={30} color={color} style={{ marginBottom: -3 }} name='chatbox'/>\r\n    },\r\n  } as TabViewRecord\r\n}\r\n\r\nexport default ({auth}:{auth:Auth})=> {\r\n  const { colors } = useTheme();\r\n  const theme = useColorScheme();\r\n  const windowType = useResizeContext();\r\n  const channelList = useMessengerChannelSorted(auth);\r\n  const [index, setIndex] = useState<number>();\r\n  const { setModal } = useModalsContext()\r\n  \r\n  const onAddList = [\r\n    ()=>setModal(RegistrationModal, {}),\r\n    ()=>setModal(ChannelEditModal, {type:'messenger'}),\r\n  ]\r\n  const drawerTabs = getDrawerTabs(theme)\r\n\r\n  useEffect(()=>{\r\n    if(index===undefined && channelList){\r\n      setIndex(channelList.length>0?1:0)\r\n    }\r\n  }, [channelList])\r\n  return <View style={windowType=='landscape'?[\r\n      styles.tabBar,\r\n      {\r\n        backgroundColor: Colors[theme].background,\r\n        borderTopColor: colors.border,\r\n      },\r\n      // tabBarStyle,\r\n    ]:{width:0}}\r\n    pointerEvents={false ? 'none' : 'auto'}\r\n  >\r\n    {windowType=='landscape' && auth.user && index!==undefined && <>\r\n      <Profile userId={auth.user.id} username={auth.user.username} name={auth.user.name}/>\r\n      <View style={{flexDirection:'row-reverse'}}>\r\n          <TextButton title='+' textStyle={{fontSize:20}} style={{borderRadius:20}} onPress={onAddList[index]}/>\r\n      </View>\r\n      <View accessibilityRole=\"tablist\" style={styles.content}>\r\n        {Object.keys(drawerTabs).length>1 ? \r\n          <TabView tabs={drawerTabs} tabBarPosition={\"top\"} onTab={setIndex} index={index}/>: \r\n          <View style={{borderTopWidth:1, flex:1, borderColor:colors.border}}>            \r\n            {Object.values(drawerTabs).map(drawerTab=>{const Tab = drawerTab.component; return <Tab key={drawerTab.title}/>})}\r\n          </View>\r\n        }\r\n      </View>\r\n    </>}\r\n  </View>\r\n}\r\n\r\n{/*<Text style={[styles.label, { color: d.isFocused ? colors.primary : '#222' }]}></Text> */}\r\n\r\nconst styles = StyleSheet.create({\r\n    tabBar: {\r\n      width:240,\r\n      elevation: 8,\r\n      borderRightWidth:1,\r\n      borderColor:Colors.borderColor\r\n    },\r\n    content: {\r\n      flex: 1,\r\n      flexDirection: 'row',\r\n    },\r\n    tab: {\r\n        flex: 1,\r\n        alignItems: 'center',\r\n    },\r\n    label: {\r\n        textAlign: 'center',\r\n        backgroundColor: 'transparent',\r\n      },\r\n  });","import InviteModal from \"./InviteModal\";\r\nimport ProfileModal from \"./ProfileModal\";\r\nimport ChannelEditModal from \"./ChannelEditModal\"\r\nimport AlertModal from \"./AlertModal\";\r\nimport DateTimePickerModal from \"./DateTimePickerModal\"\r\nimport MessageModal from \"./MessageModal\";\r\nimport RegistrationModal from \"./RegistrationModal\";\r\n\r\nexport default [\r\n    InviteModal,\r\n    ProfileModal,\r\n    ChannelEditModal,\r\n    AlertModal,\r\n    DateTimePickerModal,\r\n    MessageModal,\r\n    RegistrationModal\r\n]","import { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\r\nimport React, {useMemo} from 'react';\r\nimport { View } from 'react-native';\r\nimport { Ionicons } from '../lib/@expo/vector-icons';\r\nimport useResizeContext from '../hooks/useResizeContext';\r\nimport NotFoundScreen from '../screens/NotFoundScreen';\r\nimport {main, login} from '../screens';\r\nimport Drawer from './Drawer';\r\nimport useAuthContext from '../hooks/useAuthContext';\r\nimport { WebSocketProvider } from '../hooks/useWebsocketContext';\r\nimport HeaderRight from '../components/HeaderRight'\r\nimport Colors from '../constants/Colors';\r\nimport { TouchableOpacity } from 'react-native-gesture-handler';\r\nimport { FirebaseProvider } from '../hooks/useFirebaseContext';\r\nimport useIsMobile from '../hooks/useIsMobile';\r\nimport useColorScheme from '../hooks/useColorScheme';\r\nimport { ModalsProvider } from '../hooks/useModalsContext';\r\nimport modals from '../modals';\r\nimport useLangContext from '../hooks/useLangContext';\r\nimport CommonButton from '../components/CommonButton';\r\nimport { UploadContextProvider } from '../hooks/useUploadContext';\r\n\r\nconst Main = createStackNavigator();\r\n\r\nfunction headerLeft(navigation:any, route:any, windowType:string, theme:'light'|'dark', isMobile:boolean){\r\n    const canGOBackScreen = ['HomeScreen', 'LoginScreen'].findIndex(v=>v == route.name) == -1\r\n    const goBack = ()=>{\r\n        if (navigation.canGoBack())\r\n            navigation.goBack()\r\n        else if (canGOBackScreen)\r\n            navigation.replace('HomeScreen')\r\n    }\r\n    if (windowType=='portrait' && canGOBackScreen)\r\n        return <TouchableOpacity onPress={goBack} disabled={!isMobile}>\r\n            <CommonButton title={''} color={isMobile?Colors[theme].buttonBackgroundColor:Colors[theme].hoverColor} onPress={goBack} disabled={isMobile} style={{width:32, height:32, margin:16, paddingVertical:1, paddingHorizontal:4}}>\r\n                <Ionicons size={24} color={Colors[theme].iconColor} name=\"arrow-back\"/>\r\n            </CommonButton>\r\n        </TouchableOpacity>\r\n    return null\r\n}\r\n\r\nexport default ()=>{\r\n    const windowType = useResizeContext();\r\n    const isMobile = useIsMobile()\r\n    const {auth} = useAuthContext()\r\n    const theme = useColorScheme()\r\n    const {lang, locale} = useLangContext()\r\n    const entries = useMemo(()=>{\r\n        if (auth.user === undefined)\r\n            return []\r\n        console.log('current user: ', auth.user)\r\n        return Object.entries(auth.user === null?login:main)\r\n    }, [auth, locale])\r\n    const modalValues = useMemo(()=>{\r\n        if (auth.user === undefined)\r\n            return []\r\n        return auth.user === null?[]:modals\r\n    }, [auth])\r\n    const backgroundStyle = theme=='light'?{}:{backgroundColor:'#010409'}\r\n    return (auth.user!==undefined?<View style={{flexDirection:'row', flex:1}}>\r\n        <ModalsProvider modals={modalValues}>\r\n            {auth.user?<Drawer auth={auth}/>:undefined}\r\n            <View style={[{flex:1}, backgroundStyle]}>\r\n                <WebSocketProvider disable={auth.user === null || auth.user === undefined}>\r\n                    <FirebaseProvider user={auth.user}>\r\n                        <UploadContextProvider>\r\n                            <Main.Navigator\r\n                                screenOptions={({navigation, route})=>({\r\n                                    headerStyle:{backgroundColor:Colors[theme].header, height:isMobile?50:undefined},\r\n                                    headerTitleStyle:{color:Colors[theme].text},\r\n                                    headerLeft:()=>headerLeft(navigation, route, windowType, theme, isMobile),\r\n                                    headerRight:()=><HeaderRight/>,\r\n                                    headerLeftContainerStyle:{backgroundColor:Colors[theme].header, borderBottomWidth:1, borderColor:Colors[theme].headerBottomColor},\r\n                                    cardStyle:[{flexShrink:1}, backgroundStyle],\r\n                                    animationEnabled:windowType=='portrait',\r\n                                    cardStyleInterpolator: CardStyleInterpolators.forHorizontalIOS\r\n                                })}\r\n                            >\r\n                                {entries.map(([key, screen])=><Main.Screen key={key} name={key} component={screen.component} options={{ title: lang(screen.title) }} />)}\r\n                                <Main.Screen name=\"NotFound\" component={NotFoundScreen} options={{ title: 'Oops!' }} />\r\n                            </Main.Navigator>\r\n                            </UploadContextProvider>\r\n                    </FirebaseProvider>\r\n                </WebSocketProvider>\r\n            </View>\r\n        </ModalsProvider>\r\n    </View>:<></>);\r\n}","/**\r\n * If you are not familiar with React Navigation, refer to the \"Fundamentals\" guide:\r\n * https://reactnavigation.org/docs/getting-started\r\n *\r\n */\r\nimport * as React from 'react';\r\nimport { useColorScheme as useDefaultColorScheme } from 'react-native';\r\nimport { useColorScheme as useColorScheme } from 'react-native-appearance';\r\nimport { enableScreens } from 'react-native-screens';\r\nimport { NavigationContainer, DefaultTheme, DarkTheme, NavigationContainerRef } from '@react-navigation/native';\r\nimport { CardStyleInterpolators, createStackNavigator } from '@react-navigation/stack';\r\n\r\nimport useResizeContext, { ResizeContextProvider } from '../hooks/useResizeContext';\r\nimport useInvitee, { replaceInviteeState } from '../hooks/useInvitee';\r\nimport { modal } from '../screens';\r\nimport LinkingConfiguration from './LinkingConfiguration';\r\nimport MainNavigator from './MainNavigator';\r\n\r\n\r\nenableScreens();\r\n\r\nconst navigationRef = React.createRef<NavigationContainerRef>();\r\n\r\nexport function navigate(name:string, params?:any) {\r\n  if (params)\r\n    navigationRef.current?.navigate(name, params);\r\n  navigationRef.current?.navigate(name);\r\n}\r\n\r\nlet electronVersion:string|undefined;\r\ntry{\r\n  electronVersion = process?.versions?.['electron']\r\n}\r\ncatch(e){\r\n  electronVersion = undefined\r\n}\r\n\r\nexport default function Navigation() {\r\n  const defaultColorScheme = useDefaultColorScheme()\r\n  const userColorScheme = useColorScheme()\r\n  const colorScheme = userColorScheme =='no-preference'?defaultColorScheme:userColorScheme\r\n  return <NavigationContainer\r\n    ref={navigationRef}\r\n    documentTitle={{formatter: (options, route) => {return `TOKKI TOK`}}}\r\n    linking={electronVersion?undefined:LinkingConfiguration}\r\n    theme={colorScheme === 'dark' ? DarkTheme : DefaultTheme}>\r\n        <ResizeContextProvider>\r\n          <RootNavigator />\r\n        </ResizeContextProvider>\r\n  </NavigationContainer>\r\n}\r\n\r\n\r\n// A root stack navigator is often used for displaying modals on top of all other content\r\n// Read more here: https://reactnavigation.org/docs/modal\r\nconst Root = createStackNavigator();\r\n\r\nfunction RootNavigator() {\r\n    const windowType = useResizeContext();\r\n    useInvitee()\r\n    return <Root.Navigator\r\n        mode= 'modal'\r\n        headerMode= 'screen'\r\n        screenOptions={{\r\n            cardStyle:{backgroundColor:\"white\"},\r\n            animationEnabled: true,\r\n            cardStyleInterpolator: CardStyleInterpolators.forVerticalIOS,\r\n        }}\r\n    >\r\n        <Root.Screen name=\"Main\" component={MainNavigator} options={{headerShown:false}}/>\r\n        {Object.entries(modal).map(([key, screen])=><Root.Screen key={key} name={key} component={screen.component} options={{\r\n            title: screen.title,\r\n            gestureDirection: windowType == 'landscape'?'vertical-inverted':'vertical'\r\n        }} />)}\r\n    </Root.Navigator>\r\n}\r\n\r\n\r\n(function(l) {  // for github-page\r\n    if (l !== undefined && l.search[1] === '/' ) {\r\n        var decoded = l.search.slice(1).split('&').map(function(s) { \r\n        return s.replace(/~and~/g, '&')\r\n        }).join('?');\r\n        window.history.replaceState(null, '',\r\n            l.pathname.slice(0, -1) + decoded + l.hash\r\n        );\r\n    }\r\n}(window.location))\r\n\r\nreplaceInviteeState(window.location)\r\n\r\nconst IGNORE_WERNINGS:string[] = ['setNativeProps', 'useNativeDriver'];\r\n\r\nconst warnLogger = console.warn\r\n\r\nconsole.warn = (message: string|Object) => {\r\n    var warn = true;\r\n    if (message instanceof Object){\r\n      warn = false;\r\n    }\r\n    else if (IGNORE_WERNINGS.some(log=>message.includes(log))){\r\n      warn = false\r\n    };\r\n    if (warn){\r\n      warnLogger(message);\r\n    }\r\n    else{\r\n        // console.log(message)\r\n    }\r\n};\r\n","firebaseConfig = {\n    \"authDomain\": \"virtual-metrics-355712.firebaseapp.com\",\n    \"projectId\": \"virtual-metrics-355712\",\n    \"storageBucket\": \"virtual-metrics-355712.appspot.com\",\n    \"messagingSenderId\": \"76003576924\",\n    \"appId\": \"1:76003576924:web:c8c8a006d07918bbc02a99\",\n    \"measurementId\": \"G-SEL35L4N5R\"\n}\nif (typeof module !== 'undefined') {\n    module.exports = firebaseConfig\n}\n"],"names":["getWindowType","window","height","width","ResizeContextContext","createContext","Dimensions","get","ResizeContextProvider","_ref","children","detectMobile","useMobileDetect","_useWindowDimensions","useWindowDimensions","_useState","useState","_useState2","_slicedToArray","windowType","setWindowType","useEffect","_jsx","Provider","value","isMobile","useResizeContext","useContext","defaultContext","lastJsonMessage","undefined","sendJsonMessage","WebSocketContext","WebSocketInternalProvider","path","Context","useBackground","token","setToken","_useState3","AppState","currentState","_useState4","isActive","setIsActive","_useWebSocket","useWebSocket","websockerURL","shouldReconnect","closeEvent","protocols","onOpen","e","console","log","onClose","AsyncStorage","getItem","then","listener","addEventListener","nextState","remove","WebSocketProvider","_ref2","disable","_Fragment","useMessengerChannelList","auth","queryClient","useQueryClient","useWebsocketContext","data","useQuery","_asyncToGenerator","_auth$user","getMessengerChannelList","user","id","setQueryData","_data","find","v","concat","_toConsumableArray","sort","a","b","map","_data2$message_set$","channel","_objectSpread","last_message","content","message_set","created","useMessengerChannelSorted","channelList","_a$last_message","_b$last_message","useMessengerChannelMutation","create","useMutation","postChannel","onSuccess","invalidateQueries","update","putChannel","direct","postDirectChannel","mutateAsync","useMessengerMemberList","channel_id","getMessengerMemberList","useMessengerMemberMutation","invite","postBulkMessengerMember","leave","deleteMessengerMember","invitee_id","invitee_state","useAuthContext","messengerMemberMutation","redirect","navigate","screen","params","user_ids","tintColorLight","tintColorDark","light","text","background","tint","tabIconDefault","tabIconSelected","hoverColor","buttonBackgroundColor","header","headerBottomColor","buttonBorderColor","iconColor","dark","borderColor","focus","openURL","Platform","OS","url","location","href","Linking","props","_jsxs","View","style","Styles","footer_buttons","TouchableOpacity","footer_button","onPress","AntDesign","name","size","color","Colors","theme","StyleSheet","flexDirection","justifyContent","paddingBottom","paddingRight","alignItems","marginHorizontal","borderWidth","borderRadius","login_container","flex","backgroundColor","login_header","paddingTop","login_header_logo","resizeMode","login_header_text","marginTop","fontSize","login_header_text_bold","fontWeight","login_wrapper","borderTopRightRadius","borderTopLeftRadius","form","maxWidth","form_error","form_error_text","textAlignVertical","form_input","paddingHorizontal","marginBottom","button","button_label","login_social","login_social_separator","login_social_separator_line","login_social_separator_text","login_social_buttons","login_social_button","login_social_icon","login_social_facebook","login_footer_text","guest_footer_text","alignSelf","margin","login_footer_link","useThemeColor","colorName","useColorScheme","colorFromProps","Text","lightColor","darkColor","otherProps","_objectWithoutProperties","_excluded","DefaultText","_excluded2","DefaultView","CommonSection","styles","outerContainer","autoScale","outerContainerFill","outerContainerStyle","container","containerStyle","withSeparator","separator","title","titleView","titleStyle","subtitle","bodyView","bodyStyle","marginVertical","textAlign","padding","DefaultButton","hover","setHover","Pressable","onHoverIn","onHoverOut","disabled","paddingVertical","selectable","textStyle","_props","UploadContext","upload","dispatch","uploadReducer","initialState","action","files","index","findIndex","f","filename","progress","push","_defineProperty","filter","UploadContextProvider","_useReducer","useReducer","_useReducer2","useUploadContext","updateContnetPage","pages","updateMessages","update_i","forEach","page","length","current","timer","is_archive","useMessengerContentMutation","channelId","uploadDispatch","message","postMessage","_patch","patchMessengerContent","mutate","patch","CommonButton","ModalsContext","setModal","ModalsProvider","allModals","modals","setModals","animationType","setAnimationType","visible","Component","newModals","m","modal","Modal","transparent","flexShrink","BottomSheet","callback","deps","navigation","useNavigation","event","preventDefault","addListener","removeListener","AlertModal","type","lang","useLangContext","useModalsContext","back","messages","useModalEffect","_useAuthContext","defaultButtonProps","is_guest","buttonProps","extra","k","TextButton","link","onLongPress","image_url","Image","source","uri","maxHeight","description","normalizeHash","hash","min","max","Math","floor","str","initHash","i","charCodeAt","abs","stringToHSL","userId","Avatar","label","split","join","toUpperCase","avatarFromChannel","item","avatar","member_count","subowner","owner","TURN_SERVER","peerConstraints","iceServers","JSON","parse","urls","sessionConstraints","mandatory","OfferToReceiveAudio","OfferToReceiveVideo","VoiceActivityDetection","mediaConstraints","audio","video","framerate","onICEcandidate","pc","_message","rtcMessage","candidate","RTCIceCandidate","addIceCandidate","sendICEcandidate","sendMessage","receiver","target","BAND_WIDTH","createOffer","pcRefCurrent","stream","addStream","offerDescription","arr","sdp","test","RTCSessionDescription","optimizeSdp","setLocalDescription","_x","_x2","_x3","_x4","_x5","apply","arguments","camStyle","cam","bottonContainer","position","bottom","buttonBar","_props$user","_useWebsocketContext","_useLocalCam","pcRef","useRef","sender","setSender","_stream","setStream","isPlay","useMemo","CustomRTCView","useCallback","React","RTCView","videoProps","start","_ref3","mode","newStream","mediaDevices","getUserMedia","getDisplayMedia","catch","Object","entries","_ref4","_ref5","error","_x6","_x7","_x8","stop","getTracks","track","websocketOnMessage","_websocketOnMessage","response","channel_name","peerConnection","RTCPeerConnection","answerDescription","setRemoteDescription","_x9","_x10","useLocalCam","Button","setReceiver","_useRemoteCam","_useState5","_useState6","setUser","_useState7","_useState8","close","clearInterval","statsInterval","_websocketOnMessage2","_pcRef$current","_pcRef$current2","_pcRef$current3","_pcRef$current4","iceConnectionState","activeStream","setInterval","stats","getStats","statsOutput","framePerSecond","report","kind","keys","statName","framesPerSecond","Date","toTimeString","addTransceiver","direction","streams","getRemoteStreams","createAnswer","localDescription","_x11","useRemoteCam","TextInput","onChangeText","VideoView","scale","flexGrow","focusGuest","setFocusGuest","VideoCallContainer","setDisable","useIsMobile","videoMode","setVideoMode","guests","setGuests","_useRtcContext","useRtcContext","ceil","sqrt","toggleVideoMode","ThemedView","aspectRatio","borderLeftWidth","borderBottomWidth","flexWrap","RemoteCam","LocalCam","Ionicons","RtcProvider","humanFileSize","pow","toFixed","file","showBorder","thumbnail","FontAwesome","filesize","useUserMembershipList","groupId","getUserMembershipList","contentHeight","setContentHeight","minHeight","multiline","placeholder","editable","keyboardType","secureTextEntry","setValue","onContentSizeChange","nativeEvent","contentSize","onBlur","onEndEditing","RowField","rowStyle","TextField","CommonTextInput","localSearchReducer","keyword","active","Error","_React$useState","_React$useState2","setIndex","tabs","onTab","icons","assign","icon","TabView","renderTabBar","TabBar","indicatorStyle","activeColor","inactiveColor","renderIcon","scene","route","key","onTabPress","navigationState","routes","_ref6","_ref7","onIndexChange","renderScene","SceneMap","_ref8","_ref9","component","tabBarPosition","CommonItem","press","setPress","onPressIn","onPressOut","member","marginRight","CopyField","copied","setCopied","Clipboard","setString","InviteItem","selectedRef","has","selected","setSelected","MemberItem","delete","add","GroupTabView","userList","memberList","_useLocalSearch","compare","searchState","useLocalSearch","memberSet","Set","username","includes","dispatchKeyword","InviteModal","FlatList","contentContainerStyle","renderItem","ExternalMembershipTabView","_auth$user2","setKeyword","timeoutRef","externalMemberList","getExternalMembershipList","useExternalMembershipList","setTimeout","clearTimeout","inviteLink","replace","drawerTabs","group","external","ModalSection","dayTypes","hours","Array","toString","padStart","minutes","getDisableDays","date","startDate","clone","startOf","endDate","endOf","today","dayjs","result","format","defaultDayjs","restMinute","parseInt","Calendar","CommonPicker","DateTimePickerModal","datetime","_dayjs","_useLangContext","locale","setDate","dayType","setDayType","hour","setHour","minute","setMinute","_useState9","_useState10","disableDays","setDisableDays","Suspense","fallback","disableAllTouchEventsForDisabledDays","onMonthChange","dateString","markedDates","reduce","p","c","values","toISOString","_timerFormat","now","year","month","timerToString","TimerTag","end","ratio","diff","setExpand","isExpand","overflow","Hyperlink","linkDefault","wordBreak","linkStyle","timerMessages","getTimerMessageContentList","refetchOnReconnect","refetchOnWindowFocus","sorted","_sorted$","ms","Number","MAX_VALUE","timeout","useTimerMessageContentList","setNow","expand","MessageModal","isOwner","isTimer","contentMutation","ChannelEditModal","member_id","channelMutation","setName","setDescription","_name","newChannel","field","UploadTag","_upload$props$channel","MessengerContentPageItem","_nextPage2","nextPage","next","_nextPage","nextContent","index2","slice","isSystem","isFirst","isSelf","ownerId","dayChanged","marginLeft","attatchment_set","attatchment","aIndex","FilePreview","LinkPreview","ProfileModal","Profile","_auth$user3","firebaseConfig","require","messagingSenderId","apiKeyEncrypted","FCM_API_KEY","app","firebase","initializeApp","apiKey","messaging","onMessage","payload","Notification","permission","body","alert","requestToken","requestPermission","serviceWorkerRegistration","navigator","serviceWorker","register","process","scope","currentToken","getToken","vapidKey","FCM_PUBLIC_VAPID_KEY","unregister","FirebaseContext","setEnable","FirebaseProvider","tokenRef","notification","setNotification","enable","isMount","t","putNotification","noti","getNotification","postNotification","ErrorView","RegistrationModal","setUsername","password","setPassword","checkPassword","setCheckPassword","isStaff","_useState11","_useState12","setError","userMembershipMutation","_create","postUser","_update","patchUser","_delete","deleteUser","useUserMembershipMutation","newError","is_staff","inviteGroupId","ConfigSection","setLocale","configTheme","useConfigColorScheme","_useFirebaseContext","_useContext","useFirebaseContext","setNoti","n","textDecorationLine","l","colorScheme","setColorScheme","paddingLeft","MemberTabView","memberItem","ScrollView","MessengerTabView","_item$last_message","_item$last_message2","_item$last_message3","_item$last_message4","_avatarFromChannel","preview_content","opacity","replaceAll","unread_count","ConfigTabView","ConfigSections","getBottomTabs","OneTab","MaterialCommunityIcons","TwoTab","FourTab","SimpleLineIcons","main","HomeScreen","_route$params2","home","setHome","options","headerRight","HeaderRight","useLayoutEffect","_route$params","tab","setOptions","StyledText","ContractFooter","setParams","ChatScreen","_useMessengerChannelL","inputRef","channelAvatar","_useMessengerContentL","_useInfiniteQuery","useInfiniteQuery","pageParam","getMessengerContentList","select","getNextPageParam","lastPage","query","updated_gte","state","dataUpdatedAt","newData","getNewMessengerContentList","contents","lastMessageId","nextMessages","timerMessageRefetch","fetchNextPage","pageParams","useMessengerContentList","_memberList$find","setTimer","autoFocus","setAutoFocus","bottomTab","setBottomTab","valueLines","postValue","canGoBack","goBack","_auth$user4","minWidth","VideoCallSection","d","onScroll","contentOffset","y","onLayout","layout","UploadTags","TimerTags","borderBottomRightRadius","top","Entypo","ref","onKeyPress","shiftKey","onFocus","numberOfLines","borderBottomLeftRadius","Promise","resolve","reject","input","document","createElement","onchange","onabort","onerror","click","_auth$user5","login","LoginScreen","_login","autoCapitalize","onSubmitEditing","DemoScreen","ROOTPATH","prefixes","config","screens","Main","NotFound","NotFoundScreen","linkText","colors","useTheme","onAddList","MemberTab","ChatTab","getDrawerTabs","tabBar","borderTopColor","border","pointerEvents","accessibilityRole","borderTopWidth","drawerTab","Tab","elevation","borderRightWidth","createStackNavigator","modalValues","backgroundStyle","Drawer","Navigator","screenOptions","headerStyle","headerTitleStyle","headerLeft","canGOBackScreen","headerLeftContainerStyle","cardStyle","animationEnabled","cardStyleInterpolator","CardStyleInterpolators","forHorizontalIOS","Screen","enableScreens","electronVersion","navigationRef","_navigationRef$curren","_navigationRef$curren2","_process","_process$versions","versions","Navigation","defaultColorScheme","useDefaultColorScheme","userColorScheme","NavigationContainer","documentTitle","formatter","linking","LinkingConfiguration","DarkTheme","DefaultTheme","RootNavigator","Root","useInvitee","headerMode","forVerticalIOS","MainNavigator","headerShown","gestureDirection","search","decoded","s","history","replaceState","pathname","endsWith","startsWith","replaceInviteeState","IGNORE_WERNINGS","warnLogger","warn","some","module","exports"],"sourceRoot":""}